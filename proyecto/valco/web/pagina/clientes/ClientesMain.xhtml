<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./Template1.xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns="http://www.w3.org/1999/xhtml">

    <ui:define name="top">
        top
    </ui:define>

    <ui:define name="content">
        <h:form id="form">
            <p:dataTable id="singleDT" var="cliente" value="#{clienteMainBean.clientesModel}" selectionMode="single" selection="#{clienteMainBean.clienteSeleccionado}" rowKey="#{cliente.codigo}">
                <f:facet name="header">
                    Clientes
                </f:facet>
                <p:column headerText="Razón Social">
                    <h:outputText value="#{cliente.razonSocial}" />
                </p:column>
                <p:column headerText="Apellido Paterno">
                    <h:outputText value="#{cliente.apellidoPaterno}" />
                </p:column>
                <p:column headerText="Apellido Materno">
                    <h:outputText value="#{cliente.apellidoMaterno}" />
                </p:column>
                <p:column headerText="Nombres">
                    <h:outputText value="#{cliente.nombres}" />
                </p:column>
                <f:facet name="footer">
                    <p:commandButton value="Ingresar" update=":formingresar:popupingresar" oncomplete="PF('popupingresar').show();"  action="#{clienteMainBean.inicializarCliente()}"/>
                    <p:commandButton value="Modificar" process="singleDT" update=":popupmodificar" oncomplete="PF('popupmodificar').show();" />
                    <p:commandButton value="Borrar" process="singleDT" update=":popupborrar" oncomplete="PF('popupborrar').show();" />
                </f:facet>
            </p:dataTable>
               </h:form>

            <!-- BOTON INGRESAR CLIENTE-->
            <!-- <p:commandButton value="Ingresar" type="button" onclick="PF('popupingresar').show();" /> -->
            <h:form id="formingresar">
            <p:dialog header="Ingresar Cliente" widgetVar="popupingresar" modal="true" position="top"
                      id="popupingresar">
                
                    
                    <h:panelGrid id="ingresarGrid"  columns="6" cellpadding="5">
                        
                        <f:facet name="header">
                            <p:messages id="msgs" style="font-size: 12px; text-align: left;"/>
                        </f:facet>
                        
                        <p:outputLabel for="razon" value="Razón Social: " />
                        <p:inputText id="razon" required="true" label="razon" value="#{clienteMainBean.clienteNuevo.razonSocial}" />
                        <p:message for="razon" display="icon" />

                        <p:outputLabel for="paterno" value="Apellido Paterno: " />
                        <p:inputText id="paterno" required="true" label="paterno" value="#{clienteMainBean.clienteNuevo.apellidoPaterno}"/>
                        <p:message for="paterno" display="icon" />

                        <p:outputLabel for="materno" value="Apellido Materno: " />
                        <p:inputText id="materno" required="false" label="materno" value="#{clienteMainBean.clienteNuevo.apellidoMaterno}"/>
                        <p:message for="materno" display="icon" />

                        <p:outputLabel for="nombre" value="Nombres: " />
                        <p:inputText id="nombre" required="true" label="nombre" value="#{clienteMainBean.clienteNuevo.nombres}"/>
                        <p:message for="nombre" display="icon" />

                        <p:outputLabel for="direccion" value="Dirección" />
                        <p:inputText id="direccion" required="true" label="direccion" value="#{clienteMainBean.clienteNuevo.direccion}"/>
                        <p:message for="direccion" display="icon" />

                        <p:outputLabel for="colonia" value="Colonia" />
                        <p:inputText id="colonia" required="false" label="colonia" value="#{clienteMainBean.clienteNuevo.colonia}"/>
                        <p:message for="colonia" display="icon" />

                        <p:outputLabel for="interior" value="No. Interior" />
                        <p:inputText id="interior" required="false" label="interior" value="#{clienteMainBean.clienteNuevo.numeroInterior}"/>
                        <p:message for="interior" display="icon" />

                        <p:outputLabel for="exterior" value="No. Exterior" />
                        <p:inputText id="exterior" required="true" label="exterior" value="#{clienteMainBean.clienteNuevo.numeroExterior}"/>
                        <p:message for="exterior" display="icon" />

                        <p:outputLabel for="postal" value="Código Postal" />
                        <p:inputText id="postal" required="false" label="postal" value="#{clienteMainBean.clienteNuevo.codigoPostal}"/>
                        <p:message for="postal" display="icon" />

                        <p:outputLabel for="ciudad" value="Ciudad" />
                        <p:inputText id="ciudad" required="true" label="ciudad" value="#{clienteMainBean.clienteNuevo.ciudad}"/>
                        <p:message for="ciudad" display="icon" />

                        <p:outputLabel for="estado" value="Estado" />
                        <p:inputText id="estado" required="true" label="estado" value="#{clienteMainBean.clienteNuevo.estado}"/>
                        <p:message for="estado" display="icon" />

                        <p:outputLabel for="pais" value="País" />
                        <p:inputText id="pais" required="true" label="pais" value="#{clienteMainBean.clienteNuevo.pais}"/>
                        <p:message for="pais" display="icon" />

                        <p:outputLabel for="credito" value="Limite de Credito" />
                        <p:inputText id="credito" required="false" label="credito" value="#{clienteMainBean.clienteNuevo.limiteCredito}"/>
                        <p:message for="credito" display="icon" />

                        <p:outputLabel for="rfc" value="RFC" />
                        <p:inputText id="rfc" required="false" label="rfc" value="#{clienteMainBean.clienteNuevo.rfc}"/>
                        <p:message for="rfc" display="icon" />

                        <p:outputLabel for="correo" value="Correo Electronico" />
                        <p:inputText id="correo" required="false" label="correo" value="#{clienteMainBean.clienteNuevo.correoElectronico}"/>
                        <p:message for="correo" display="icon" />

                        <p:outputLabel for="bancaria" value="Cuenta Bancaria" />
                        <p:inputText id="bancaria" required="false" label="bancaria" value="#{clienteMainBean.clienteNuevo.cuentaBancaria}"/>
                        <p:message for="bancaria" display="icon" />

                        <p:outputLabel for="banco" value="Banco" />
                        <p:inputText id="banco" required="false" label="banco" value="#{clienteMainBean.clienteNuevo.banco}"/>
                        <p:message for="banco" display="icon" />


                        <h:outputText value="Incobrable: " />
                        <p:selectBooleanCheckbox value="#{clienteMainBean.clienteNuevo.incobrable}" id="incobrable"/>
                        <p:message for="incobrable" display="icon"/>

                        <h:outputText value="Foraneo: " />
                        <p:selectBooleanCheckbox value="#{clienteMainBean.clienteNuevo.foreano}" id="foraneo"/>
                        <p:message for="foraneo" display="icon"/>

                        <f:facet name="footer">

                            <p:commandButton value="Guardar"  id="guardar1" update="ingresarGrid :form:singleDT" oncomplete="handleLoginRequest(xhr, status, args, 'popupingresar' )"  action="#{clienteMainBean.insertarCliente()}"/>
                            <p:commandButton value="Cancelar" ajax="false" id="cancelar1" oncomplete="handleLoginRequest(xhr, status, args, 'popupingresar')" update="ingresarGrid" immediate="true"/>
                        </f:facet>
                    </h:panelGrid>

                
            </p:dialog>
            </h:form>
            
            <script type="text/javascript">
    function handleLoginRequest(xhr, status, args, popupname) {
        if(args.validationFailed ) {
            PF(popupname).jq.effect("shake", {times:5}, 100);
        }
        else {
            PF(popupname).hide();
            $('#loginLink').fadeOut();
        }
    }
            </script>
                

            <!-- BOTON MODIFICAR CLIENTE-->
            <!-- <p:commandButton value="Modificar" type="button" onclick="PF('popupmodificar').show();" /> -->
            
            <p:dialog header="Modificar Cliente" widgetVar="popupmodificar" id="popupmodificar" modal="true">
                <h:form>

                <h:panelGrid   columns="4" cellpadding="5">

                    <h:outputLabel for="razon" value="Razón Social: " />
                    <p:inputText id="razon2" required="true" label="razon" value="#{clienteMainBean.clienteSeleccionado.razonSocial}" />

                    <h:outputLabel for="paterno" value="Apellido Paterno: " />
                    <p:inputText id="paterno2" required="true" label="paterno" value="#{clienteMainBean.clienteSeleccionado.apellidoPaterno}"/>

                    <h:outputLabel for="materno" value="Apellido Materno: " />
                    <p:inputText id="materno2" required="false" label="materno" value="#{clienteMainBean.clienteSeleccionado.apellidoMaterno}"/>

                    <h:outputLabel for="nombre" value="Nombres: " style="text-align: right"/>
                    <p:inputText id="nombre2" required="true" label="nombre" value="#{clienteMainBean.clienteSeleccionado.nombres}"/>

                    <h:outputLabel for="direccion" value="Dirección" />
                    <p:inputText id="direccion2" required="true" label="direccion" value="#{clienteMainBean.clienteSeleccionado.direccion}"/>

                    <h:outputLabel for="colonia" value="Colonia" />
                    <p:inputText id="colonia2" required="false" label="colonia" value="#{clienteMainBean.clienteSeleccionado.colonia}"/>

                    <h:outputLabel for="interior" value="No. Interior" />
                    <p:inputText id="interior2" required="false" label="interior" value="#{clienteMainBean.clienteSeleccionado.numeroInterior}"/>

                    <h:outputLabel for="exterior" value="No. Exterior" />
                    <p:inputText id="exterior2" required="true" label="exterior" value="#{clienteMainBean.clienteSeleccionado.numeroExterior}"/>

                    <h:outputLabel for="postal" value="Código Postal" />
                    <p:inputText id="postal2" required="false" label="postal" value="#{clienteMainBean.clienteSeleccionado.codigoPostal}" />

                    <h:outputLabel for="ciudad" value="Ciudad" />
                    <p:inputText id="ciudad2" required="true" label="ciudad" value="#{clienteMainBean.clienteSeleccionado.ciudad}"/>

                    <h:outputLabel for="estado" value="Estado" />
                    <p:inputText id="estado2" required="true" label="estado" value="#{clienteMainBean.clienteSeleccionado.estado}"/>

                    <h:outputLabel for="pais" value="País" />
                    <p:inputText id="pais2" required="true" label="pais" value="#{clienteMainBean.clienteSeleccionado.pais}"/>

                    <h:outputLabel for="credito" value="Limite de Credito" />
                    <p:inputText id="credito2" required="false" label="credito" value="#{clienteMainBean.clienteSeleccionado.limiteCredito}"/>

                    <h:outputLabel for="rfc" value="RFC" />
                    <p:inputText id="rfc2" required="false" label="rfc" value="#{clienteMainBean.clienteSeleccionado.rfc}"/>

                    <h:outputLabel for="correo" value="Correo Electronico" />
                    <p:inputText id="correo2" required="false" label="correo" value="#{clienteMainBean.clienteSeleccionado.correoElectronico}"/>

                    <h:outputLabel for="bancaria" value="Cuenta Bancaria" />
                    <p:inputText id="bancaria2" required="false" label="bancaria" value="#{clienteMainBean.clienteSeleccionado.cuentaBancaria}"/>

                    <h:outputLabel for="banco" value="Banco" />
                    <p:inputText id="banco2" required="false" label="banco" value="#{clienteMainBean.clienteSeleccionado.banco}"/>
                    
                    <h:outputLabel for="estatus2" value="Estatus" />
                    <p:inputText id="estatus2" required="true" label="estatus" value="#{clienteMainBean.clienteSeleccionado.estatus}"/>

                    <h:outputText value="Incobrable: " />
                    <p:selectBooleanCheckbox value="#{clienteMainBean.clienteSeleccionado.incobrable}" />

                    <h:outputText value="Foraneo: " />
                    <p:selectBooleanCheckbox value="#{clienteMainBean.clienteSeleccionado.foreano}" />


                    <f:facet name="footer">
                        <p:commandButton value="Guardar" id="guardar" partialSubmit="true" ajax="false" action="#{clienteMainBean.actualizarCliente()}"/>
                        <p:commandButton value="Cancelar" id="cancelar"  ajax="false" />
                    </f:facet>
                </h:panelGrid>
            </h:form>
            </p:dialog>
                

            <!--BOTON ELIMINAR CLIENTE-->

            <p:dialog header="Borrar Cliente" widgetVar="popupborrar" modal="true" id="popupborrar">
                <h:form>
                    <h:panelGrid   columns="4" cellpadding="5">
                        <h:outputText value="Esta seguro?" /> 

                        <f:facet name="footer">
                        <p:commandButton value="Si" id="si" partialSubmit="true" ajax="false" action="#{clienteMainBean.borrarCliente()}"/>
                        <p:commandButton value="No" id="no"  ajax="false" />
                        </f:facet>
                    </h:panelGrid>
                </h:form>

            </p:dialog>

        


    </ui:define>

</ui:composition>
