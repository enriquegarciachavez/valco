<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="VentasXRepartidor" language="groovy" pageWidth="612" pageHeight="792" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="dc617a19-0298-45dc-8442-0b4e3a4ba0d1">
	<property name="ireport.zoom" value="1.5"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="fechaInicial" class="java.util.Date"/>
	<parameter name="fechaFinal" class="java.util.Date"/>
	<parameter name="codigoRepartidor" class="java.lang.Integer"/>
	<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["C:\\apps\\valco\\valco\\proyecto\\valco\\web\\pagina\\reportes\\ventas por repartidor\\"]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT
     NOTAS_DE_VENTA.`CODIGO` AS NOTAS_DE_VENTA_CODIGO,
     NOTAS_DE_VENTA.`FOLIO` AS NOTAS_DE_VENTA_FOLIO,
     NOTAS_DE_VENTA.`ESTATUS` AS NOTAS_DE_VENTA_ESTATUS,
     NOTAS_DE_VENTA.`REPARTIDORES_CODIGO` AS NOTAS_DE_VENTA_REPARTIDORES_CODIGO,
     NOTAS_DE_VENTA.`CLIENTES_CODIGO` AS NOTAS_DE_VENTA_CLIENTES_CODIGO,
     NOTAS_DE_VENTA.`FACTURAS_CODIGO` AS NOTAS_DE_VENTA_FACTURAS_CODIGO,
     NOTAS_DE_VENTA.`USUARIOS_CODIGO` AS NOTAS_DE_VENTA_USUARIOS_CODIGO,
     REPARTIDORES.`CODIGO` AS REPARTIDORES_CODIGO,
     NOTAS_DE_VENTA.`FECHA_DE_VENTA` AS NOTAS_DE_VENTA_FECHA_DE_VENTA,
     NOTAS_DE_VENTA.`FLETE` AS NOTAS_DE_VENTA_FLETE,
     REPARTIDORES.`APELLIDO_PATERNO` AS REPARTIDORES_APELLIDO_PATERNO,
     REPARTIDORES.`APELLIDO_MATERNO` AS REPARTIDORES_APELLIDO_MATERNO,
     REPARTIDORES.`NOMBRES` AS REPARTIDORES_NOMBRES
FROM
     `REPARTIDORES` REPARTIDORES INNER JOIN `NOTAS_DE_VENTA` NOTAS_DE_VENTA ON REPARTIDORES.`CODIGO` = NOTAS_DE_VENTA.`REPARTIDORES_CODIGO`
WHERE
     REPARTIDORES.CODIGO = $P{codigoRepartidor} AND
     NOTAS_DE_VENTA.ESTATUS != 'ACTIVO'
 AND NOTAS_DE_VENTA.FECHA_DE_VENTA BETWEEN $P{fechaInicial} AND $P{fechaFinal}]]>
	</queryString>
	<field name="NOTAS_DE_VENTA_CODIGO" class="java.lang.Integer"/>
	<field name="NOTAS_DE_VENTA_FOLIO" class="java.lang.Integer"/>
	<field name="NOTAS_DE_VENTA_ESTATUS" class="java.lang.String"/>
	<field name="NOTAS_DE_VENTA_REPARTIDORES_CODIGO" class="java.lang.Integer"/>
	<field name="NOTAS_DE_VENTA_CLIENTES_CODIGO" class="java.lang.Integer"/>
	<field name="NOTAS_DE_VENTA_FACTURAS_CODIGO" class="java.lang.Integer"/>
	<field name="NOTAS_DE_VENTA_USUARIOS_CODIGO" class="java.lang.Integer"/>
	<field name="REPARTIDORES_CODIGO" class="java.lang.Integer"/>
	<field name="NOTAS_DE_VENTA_FECHA_DE_VENTA" class="java.sql.Date"/>
	<field name="NOTAS_DE_VENTA_FLETE" class="java.lang.Integer"/>
	<field name="REPARTIDORES_APELLIDO_PATERNO" class="java.lang.String"/>
	<field name="REPARTIDORES_APELLIDO_MATERNO" class="java.lang.String"/>
	<field name="REPARTIDORES_NOMBRES" class="java.lang.String"/>
	<variable name="totalPeriodo" class="java.math.BigDecimal" calculation="Sum"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="79" splitType="Stretch">
			<textField pattern="EEE, d MMM yyyy hh:mm aaa">
				<reportElement x="482" y="10" width="100" height="20" uuid="136a7c5f-d18b-4425-9597-734fbb49697c"/>
				<textElement>
					<font fontName="Arial" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
			<textField pattern="" isBlankWhenNull="false">
				<reportElement mode="Transparent" x="154" y="50" width="287" height="20" forecolor="#000000" backcolor="#FFFFFF" uuid="760fb983-c0d0-433e-8b73-336398a7a408"/>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="None" markup="none">
					<font fontName="Arial" size="10" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA["DEL "+new SimpleDateFormat("dd/MMM/yyyy").format($P{fechaInicial})+" AL "+new SimpleDateFormat("dd/MMM/yyyy").format($P{fechaFinal})]]></textFieldExpression>
			</textField>
			<image>
				<reportElement x="0" y="4" width="115" height="75" uuid="45a34bfb-401d-438e-aff9-413bf3bd5c74"/>
				<imageExpression><![CDATA["C:\\apps\\valco\\producto\\logo.png"]]></imageExpression>
			</image>
			<staticText>
				<reportElement x="154" y="10" width="287" height="20" uuid="42dca30f-239f-438d-aee3-5fc627d5b252"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[REPORTE DE VENTAS OR REPARTIDOR]]></text>
			</staticText>
			<textField>
				<reportElement x="154" y="30" width="287" height="20" uuid="a3850504-21fe-4b51-9459-5d643386687b"/>
				<textElement textAlignment="Center"/>
				<textFieldExpression><![CDATA[$F{REPARTIDORES_NOMBRES}+" "+$F{REPARTIDORES_APELLIDO_PATERNO}+" "+$F{REPARTIDORES_APELLIDO_MATERNO}]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<detail>
		<band height="161" splitType="Stretch">
			<subreport>
				<reportElement x="0" y="79" width="572" height="82" uuid="8f322fc6-ffaf-4506-843b-4db37d4c7b96"/>
				<subreportParameter name="fecha">
					<subreportParameterExpression><![CDATA[$F{NOTAS_DE_VENTA_FECHA_DE_VENTA}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<returnValue subreportVariable="total" toVariable="totalPeriodo" calculation="Sum"/>
				<subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "VentasXRepartidor_subreport1.jasper"]]></subreportExpression>
			</subreport>
			<textField>
				<reportElement x="115" y="30" width="100" height="20" uuid="d501d49c-e631-4773-bd4a-17ba0f0a816a"/>
				<textFieldExpression><![CDATA[new SimpleDateFormat("dd/MMM/yyyy").format($F{NOTAS_DE_VENTA_FECHA_DE_VENTA})]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="0" y="30" width="100" height="20" uuid="808daf49-b8c8-46f9-96b5-8169a3f6b063"/>
				<textElement textAlignment="Right"/>
				<text><![CDATA[Fecha:]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="59" width="100" height="20" uuid="3178932f-79c7-4981-9cf2-81bd161c1cd7"/>
				<text><![CDATA[Folio]]></text>
			</staticText>
			<staticText>
				<reportElement x="100" y="59" width="372" height="20" uuid="a746b37d-bd1b-414a-9fab-7ac2aba58cbe"/>
				<textElement textAlignment="Center"/>
				<text><![CDATA[Cliente]]></text>
			</staticText>
			<staticText>
				<reportElement x="472" y="59" width="100" height="20" uuid="5f381720-61af-47ff-a364-d4bea72660e2"/>
				<text><![CDATA[Importe]]></text>
			</staticText>
		</band>
	</detail>
	<summary>
		<band height="42" splitType="Stretch">
			<textField pattern="$ #,##0.00">
				<reportElement x="472" y="0" width="100" height="20" uuid="9b13f4cf-11ff-46f3-bec7-a39a7488d7c5"/>
				<textFieldExpression><![CDATA[$V{totalPeriodo}]]></textFieldExpression>
			</textField>
		</band>
	</summary>
</jasperReport>
