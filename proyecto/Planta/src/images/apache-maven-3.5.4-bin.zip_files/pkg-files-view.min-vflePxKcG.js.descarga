var __importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};define("modules/clean/react/app_actions/app_actions_menu",["require","exports","modules/clean/react/async/loadable"],function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AppActionsMenu=r.Loadable({loader:function(){return new Promise(function(t,r){e(["modules/clean/react/app_actions/app_actions_menu_component"],t,r)}).then(__importStar).then(function(e){return e.AppActionsMenu})}})}),define("modules/clean/react/app_actions/category",["require","exports","modules/core/i18n"],function(e,t,r){"use strict";function o(e){return t.CATEGORY_FILETYPE_MAP[e][1]}function n(e){return i[e]||null}Object.defineProperty(t,"__esModule",{value:!0});var i={0:r._("Default"),1:r._("Edit"),2:r._("Edit"),3:r._("Video comment"),4:r._("View or Edit"),5:r._("Send for signature"),6:r._("Send fax")};t.CATEGORY_FILETYPE_MAP=[[0,r._("Select app category..."),[]],[1,r._("Send for signature"),[".pdf",".doc",".docx"]],[2,r._("PDF editing"),[".pdf"]],[3,r._("Preview"),[".dwg"]],[4,r._("Image editing"),[".png",".jpg",".jpeg",".tiff"]],[5,r._("Video comment"),[".mp4",".mov",".m4v",".wmv",".mpg"]],[6,r._("Send fax"),[".pdf",".doc",".docx"]]],t.getCategoryNameById=o,t.getDisplayString=n}),define("modules/clean/react/app_actions/feedback_modal",["require","exports","tslib","modules/clean/ajax","external/react","modules/clean/react/css","modules/clean/react/image","spectrum/button","modules/core/i18n","modules/clean/react/modal","spectrum/input","modules/clean/static_urls","modules/clean/filepath","modules/clean/file_store/utils"],function(e,t,r,o,n,i,a,l,s,c,d,u,p,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importStar(o),n=r.__importStar(n);var h=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={suggestionsText:"",commentsText:"",showThankYouModal:!1},t.submitFeedback=function(){o.SilentBackgroundRequest({url:"/aa/app_choice_feedback",subject_user:t.props.user.id,data:{ext:t.getFileExt(),other_suggested_apps:t.state.suggestionsText,comments:t.state.commentsText}}),t.setState({showThankYouModal:!0})},t.onSuggestedAppsChanged=function(e){t.setState({suggestionsText:e.currentTarget.value.trim()})},t.onCommentChanged=function(e){t.setState({commentsText:e.currentTarget.value.trim()})},t.isAnyFeedbackInput=function(){return t.state.suggestionsText.length>0||t.state.commentsText.length>0},t.renderFeedbackModel=function(){return n.createElement(c.Modal,{className:"pfa-feedback-modal",ariaLabel:"Feedback Modal",acceptButtonText:null,style:"clean",title:s._("Which app were you looking for?"),autoFocusPrimaryInput:!1,width:"560"},n.createElement("div",{className:"pfa-feedback-inputs"},n.createElement("div",{className:"pfa-feedback-title"},n.createElement("h1",{className:"pfa-feedback-modal-header"},s._("Send feedback"))),n.createElement("div",{className:"pfa-feedback-suggestions"},n.createElement("label",{htmlFor:"pfa-app-suggestion-input",className:"pfa-app-feedback-label"},s._("Suggest another app")),n.createElement(d.Input,{id:"pfa-app-suggestion-input",className:"pfa-app-suggestion-input",onChange:t.onSuggestedAppsChanged,"aria-label":s._("app suggestion input")}),n.createElement("label",{htmlFor:"pfa-feedback-comments",className:"pfa-app-feedback-label"},s._("Add comments (optional)")),n.createElement("textarea",{id:"pfa-feedback-comments",className:"pfa-feedback-comments textinput c-input",onChange:t.onCommentChanged,"aria-label":s._("feedback"),rows:4}))),n.createElement("div",{className:"pfa-feedback-action-bar"},n.createElement(l.Button,{variant:"secondary",className:"pfa-app-feedback-action-bar-button",onClick:t.props.onBack},s._("Cancel")),n.createElement("div",{className:"pfa-feedback-action-bar-space"}),n.createElement(l.Button,{variant:"primary",className:"pfa-app-feedback-action-bar-button",disabled:!t.isAnyFeedbackInput(),onClick:t.submitFeedback},s._("Send feedback"))))},t.renderThankYouModal=function(){return n.createElement(c.Modal,{className:"pfa-feedback-thank-you-modal",ariaLabel:"Feedback Modal",acceptButtonText:null,style:"clean"},n.createElement(a.Image,{className:"pfa-feedback-thank-you-image",alt:s._("Thank you"),src:u.static_url("/static/images/app_actions/feedback_comments-vfluWMAvS.png"),srcHiRes:u.static_url("/static/images/app_actions/feedback_comments@2x-vflWa-9nT.png")}),n.createElement("h1",{className:"pfa-feedback-thank-you-header"},s._("Thanks for letting us know!")),n.createElement("h2",{className:"pfa-feedback-thank-you-subtext"},s._("Your feedback will help make Dropbox even better.")))},t}return r.__extends(t,e),t.prototype.getFileExt=function(){var e=this.props.file;return m.isSharedFile(e)&&e.filename?p.file_extension(e.filename):m.isBrowseFile(e)&&e.ext?e.ext:""},t.prototype.render=function(){return this.state.showThankYouModal?this.renderThankYouModal():this.renderFeedbackModel()},t})(n.Component);t.FeedbackModal=i.requireCssWithComponent(h,["/static/css/app_actions/index-vflbo5xni.css"])}),define("modules/clean/react/files_view/column_header",["require","exports","tslib","external/classnames","spectrum/checkbox","spectrum/table","external/react","modules/clean/react/files_view/column_header_menu","modules/clean/react/files_view/fixed_table_head","modules/clean/react/files_view/sticky_table_head","modules/clean/react/files_view/view_type_column_header_menu","modules/clean/react/files_view/types"],function(e,t,r,o,n,i,a,l,s,c,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),a=r.__importStar(a);var p=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isHovered:!1},t.handleChangeSelectAllCheckbox=function(e){"unchecked"===e?t.props.onDeselectAll():t.props.onSelectAll()},t.handleMouseEnter=function(){t.setState({isHovered:!0})},t.handleMouseLeave=function(){t.setState({isHovered:!1})},t}return r.__extends(t,e),t.prototype.getAriaSortValue=function(e){return e===u.SortDirection.ASCENDING?"ascending":e===u.SortDirection.DESCENDING?"descending":"none"},t.prototype.render=function(){var e=this,t=this.state.isHovered,u=this.props,p=u.columnFlex,m=u.isCompactMode,h=u.isSelectMode,f=u.isSticky,_=u.isTabbing,b=u.currentSort,g=u.onSelection,w=u.onSort,S=u.onSwitchViewType,v=u.selectAllCheckboxState,T=void 0===v?"unchecked":v,C=u.stickyOffsetHeight,E=u.stickyOffsetTop,y=u.columns,F=u.visibleColumns,N=u.viewType,I=u.viewTypes,M=u.viewTypeLabels,D=u.onTTI,x=!(_||h||t||m),k=[a.createElement(i.TableHeadCell,{className:"brws-column-header-table-cell brws-checkbox-cell",key:"checkbox-cell",role:"columnheader",scope:"col"},a.createElement("div",{className:"brws-vertically-center"},a.createElement(n.Checkbox,{className:o.default("brws-checkbox",{"brws-checkbox-checked":"checked"===T}),checked:T,onChange:this.handleChangeSelectAllCheckbox,variant:x?"invisible":"default"})))].concat(F.map(function(t,r){var o=b&&b.sortField===t.sortField?b.sortDirection:void 0;return a.createElement(i.TableHeadCell,{key:r,role:"columnheader",scope:"col","aria-sort":e.getAriaSortValue(o),className:"brws-column-header-table-cell"},a.createElement(l.ColumnHeaderMenu,{column:t,sortDirection:o,columns:y,visibleColumns:F,onSelection:g,onSort:w,viewType:N}),r===F.length-1&&a.createElement(d.ViewTypeColumnHeaderMenu,{onTTI:D,viewType:N,viewTypes:I,viewTypeLabels:M,onSwitchViewType:S}))})),P={offsetHeight:C,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave};return f?a.createElement(c.StickyTableHead,r.__assign({columnFlex:p,offsetTop:E,className:"brws-column-header"},P),k):a.createElement(s.FixedTableHead,r.__assign({},P),k)},t})(a.PureComponent);t.ColumnHeader=p}),define("modules/clean/react/files_view/column_header_menu",["require","exports","tslib","external/classnames","spectrum/icon_form","spectrum/popover","external/react","modules/clean/react/files_view/types","modules/core/i18n"],function(e,t,r,o,n,i,a,l,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),a=r.__importStar(a);var c=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handlePopoverSelection=function(e){var r=t.props,o=r.onSort,n=r.onSelection,i=r.column;e===l.SortDirection.ASCENDING||e===l.SortDirection.DESCENDING?o(i.sortField,e):(n(e,i),1===t.props.visibleColumns.length&&o(e.sortField,t.props.sortDirection||l.SortDirection.ASCENDING))},t}return r.__extends(t,e),t.prototype._columnMenuTitle=function(){switch(this.props.viewType){case l.ViewType.Grid:case l.ViewType.LargeGrid:return s._("Group by");case l.ViewType.List:default:return s._("Show")}},t.prototype.render=function(){var e=this.props,t=e.column,r=e.columns,c=e.visibleColumns,d=e.sortDirection;if(t.isSortDisabled)return a.createElement("div",{className:"normal brws-column-header-menu"},a.createElement("span",{className:"brws-column-header-menu-trigger-disabled"},t.label));var u;!t.isLocked&&r&&r.length&&(u=[a.createElement(i.PopoverItemGroupSeparator,{key:"show-separator"}),a.createElement(i.PopoverItemGroup,{key:"show-item-group"},a.createElement(i.PopoverItemGroupTitle,{className:"brws-column-header-menu-title",key:"show-title"},this._columnMenuTitle()),r.filter(function(e){return!e.isLocked}).map(function(e){return a.createElement(i.PopoverSelectableItem,{key:e.sortField,disabled:c.map(function(e){return e.sortField}).includes(e.sortField)&&e.sortField!==t.sortField,selected:e.sortField===t.sortField,value:e},e.label)}))]);var p=d===l.SortDirection.ASCENDING?"sort-arrow-up":d===l.SortDirection.DESCENDING?"sort-arrow-down":"caret-down";return a.createElement(i.Popover,{className:"brws-column-header-menu",onSelection:this.handlePopoverSelection},a.createElement(i.PopoverTrigger,{className:o.default("brws-column-header-menu-trigger",{"brws-column-header-menu-trigger-active":!!d}),title:t.popoverTriggerLabel},a.createElement("span",null,t.label),a.createElement("span",{className:"brws-column-header-menu-label-icon-wrapper"},a.createElement(n.IconForm,{className:"brws-column-header-menu-label-icon",name:p}))),a.createElement(i.PopoverContent,null,a.createElement(i.PopoverItemGroup,null,a.createElement(i.PopoverItemGroupTitle,{className:"brws-column-header-menu-title"},s._("Order")),a.createElement(i.PopoverSelectableItem,{selected:d===l.SortDirection.ASCENDING,value:l.SortDirection.ASCENDING},s._("Ascending")),a.createElement(i.PopoverSelectableItem,{selected:d===l.SortDirection.DESCENDING,value:l.SortDirection.DESCENDING},s._("Descending"))),u))},t})(a.PureComponent);t.ColumnHeaderMenu=c}),define("modules/clean/react/files_view/column_manager",["require","exports","tslib","external/react","modules/clean/immutability_helper","modules/clean/react/files_view/types"],function(e,t,r,o,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importStar(o);var a=(function(e){function t(t){var r=e.call(this,t)||this;return r.handleSelection=function(e,t){var o=r.props,a=o.viewType,l=o.onColumnsChanged,s=o.viewTypeColumns,c=r.state.visibleColumns,d=s?s[i.ViewType.List]:void 0,u=s?s[i.ViewType.Grid]:void 0;if(d&&u){var p=c.indexOf(t);if(p===-1||c.includes(e))r.changeVisibleColumns(c);else{var m=n.splice(c,p,1,e);r.changeVisibleColumns(m);var h=r.isSizeColumnPresent(m);a===i.ViewType.List?l(r.swapColumns(d,t.sortField,e.sortField),i.ViewType.List,h):(l(r.swapColumns(u,t.sortField,e.sortField),a,h),e.sortField!==i.SortField.FILENAME&&l(r.swapColumns(d,d[1].sortField,e.sortField),i.ViewType.List,h))}}},r}return r.__extends(t,e),t.prototype.componentWillMount=function(){this.changeVisibleColumns(this.computeVisibleColumns(this.props),!0)},t.prototype.componentWillReceiveProps=function(e){var t=this.props.viewTypeColumns,r=this.state.visibleColumns,o=this.getNumVisibleColumns(this.props),n=this.getNumVisibleColumns(e);if(this.props.columns!==e.columns)if(1===n&&e.columns.length&&e.currentSort){var a=e.columns,l=e.viewType,s=t?t[i.ViewType.Grid]:void 0;switch(l){case i.ViewType.List:this.changeVisibleColumns([a[0]],!0);break;case i.ViewType.Grid:case i.ViewType.LargeGrid:if(s){var c=e.currentSort,d=a.find(function(e){return e.sortField===c.sortField}),u=d||a[0];this.deferredOnColumnsChangedHandler([u],this.swapColumns(s,s[0].sortField,u.sortField),l)}}}else this.changeVisibleColumns(e.columns.slice(0,n),!0);else if(n<o)this.changeVisibleColumns(r.slice(0,n),!0);else if(n>o){var a=this.props.columns,p=n-r.length,m=[];a.forEach(function(e){m.length<p&&!r.includes(e)&&m.push(e)}),this.changeVisibleColumns(r.concat(m),!0)}},t.prototype.changeVisibleColumns=function(e,t){var r=this;void 0===t&&(t=!1),this.resetChangeVisibleColumnsTimeout();var o=this.isSizeColumnPresent(e);this.setState({visibleColumns:e,canDisplayFolderSizes:o}),t?this.changeVisibleColumnsTimeout=setTimeout(function(){r.resetChangeVisibleColumnsTimeout(),r.props.onCanDisplayFolderSizesChanged(o)}):this.props.onCanDisplayFolderSizesChanged(o)},t.prototype.resetChangeVisibleColumnsTimeout=function(){this.changeVisibleColumnsTimeout&&(clearTimeout(this.changeVisibleColumnsTimeout),this.changeVisibleColumnsTimeout=void 0)},t.prototype.deferredOnColumnsChangedHandler=function(e,t,r){var o=this;this.resetDeferredOnColumnsChangedHandler();var n=this.isSizeColumnPresent(e);this.setState({visibleColumns:e,canDisplayFolderSizes:n}),this.onColumnsChangesTimeout=setTimeout(function(){o.resetDeferredOnColumnsChangedHandler(),o.props.onColumnsChanged(t,r,n)})},t.prototype.resetDeferredOnColumnsChangedHandler=function(){this.onColumnsChangesTimeout&&(clearTimeout(this.onColumnsChangesTimeout),this.onColumnsChangesTimeout=void 0)},t.prototype.swapColumns=function(e,t,r){var o=e.map(function(e){return e.sortField}).indexOf(t),i=e.map(function(e){return e.sortField}).indexOf(r);if(o===i||o===-1||i===-1)return e;var a=e[o],l=e[i];return n.splice(n.splice(e,o,1,l),i,1,a)},t.prototype.computeVisibleColumns=function(e){return e.columns.slice(0,this.getNumVisibleColumns(e))},t.prototype.getNumVisibleColumns=function(e){var t=e.isMatchedLarge,r=e.isMatchedMedium,o=e.isSearchMode;switch(e.viewType){case i.ViewType.Grid:case i.ViewType.LargeGrid:return 1;case i.ViewType.List:default:return t?o?2:3:r?2:1}},t.prototype.isSizeColumnPresent=function(e){return e.some(function(e){return e.sortField===i.SortField.SIZE})},t.prototype.render=function(){var e=this.props.children,t=this.state,r=t.visibleColumns,o=t.canDisplayFolderSizes;if(!e)return null;var n=e;return"function"==typeof e&&(n=e({visibleColumns:r,canDisplayFolderSizes:o,handleSelection:this.handleSelection})),n},t})(o.PureComponent);t.ColumnManager=a}),define("modules/clean/react/files_view/controller",["require","exports","tslib","external/classnames","external/immutable","spectrum/media_table_skeleton","spectrum/table","external/react","external/react-dom","external/lodash","modules/clean/react/files_view/types","modules/clean/react/files_view/drag_and_drop","modules/clean/react/files_view/file_list_empty_folder_table","modules/clean/react/files_view/column_header","modules/clean/react/files_view/column_manager","modules/clean/react/files_view/constants","modules/clean/react/files_view/list","modules/clean/react/files_view/pinned_team_folder_view","modules/clean/react/selectable_list","modules/clean/react/files_view/selectors","modules/clean/react/files_view/tile_grid","modules/clean/react/files_view/internal_drag_status","modules/clean/react/browse/models","modules/clean/user_education/user_education_client","modules/clean/web_timing_logger","modules/core/browser","modules/core/i18n","modules/core/notify","modules/clean/sharing/access_level","modules/clean/photos/thumb_loading/buffered_thumb_store","modules/clean/photos/thumb_loading/generic_thumb_store"],function(e,t,r,o,n,i,a,l,s,c,d,u,p,m,h,f,_,b,g,w,S,v,T,C,E,y,F,N,I,M,D){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),n=r.__importStar(n),l=r.__importStar(l),s=r.__importStar(s),c=r.__importStar(c),E=r.__importStar(E);var x=function(){},k=[I.NameSpaceAccess.ACCESS_NO_ACCESS,I.NameSpaceAccess.ACCESS_READER,I.NameSpaceAccess.ACCESS_READER_NO_COMMENT],P=[{moduleName:"cdm_new_team_creator_v2",stepName:"start"},{moduleName:"cdm_new_team_joiner_v2",stepName:"start"},{moduleName:"uj_housewarming_v1",stepName:"start"},{moduleName:"uj_housewarming_v2",stepName:"start"},{moduleName:"uj_housewarming_v5",stepName:"start"},{moduleName:"ncct_uj_housewarming_v5",stepName:"start"},{moduleName:"trial_admin_setup_team_space",stepName:"team_space_tooltip"},{moduleName:"trial_admin_setup_team_space_v2",stepName:"team_space_tooltip"},{moduleName:"trial_admin_setup_team_space_mobile",stepName:"team_space_tooltip"},{moduleName:"trial_admin_setup_team_space_mobile_v2",stepName:"team_space_tooltip"},{moduleName:"biz_onboarding_tour_rwl_copy_creator_v1",stepName:"start"},{moduleName:"biz_onboarding_tour_rwl_copy_joiner_v1",stepName:"start"},{moduleName:"biz_trial_onboarding_creator_no_tf",stepName:"start"},{moduleName:"biz_trial_onboarding_joiner_no_tf",stepName:"start"}],R=(function(t){function I(){var e=null!==t&&t.apply(this,arguments)||this;return e.gridViewPrewarmedThumbnailRequestIds=[],e.state={thumbStore:new M.BufferedThumbStore,isTabbing:!1,keyboardShortcutModalHandler:function(){e.setState({shouldShowKeyboardShortcutModal:!0})},dropTarget:null,tilesPerRow:1},e.handleMouseDownBody=function(){e.setState({isTabbing:!1})},e.handleKeyDownBody=function(t){9===t.keyCode&&e.setState({isTabbing:!0})},e.handleTabbingStart=function(){e.setState({isTabbing:!0})},e.handleCopyToClipboard=function(){var t=e.props,r=t.selectedFiles,o=t.onCopyToClipboard;r.size&&o(r.toArray())},e.handleNewFolderSubmit=function(t){""===t?(e.props.onNewFolderCancel(),e.handleNewFolderCancel({source:d.NameInputActionSource.SUBMIT})):e.props.onNewFolderSubmit(t)},e.handleNewFolderCancel=function(t){t.source!==d.NameInputActionSource.ESC&&N.Notify.error(F._("Please provide a name for the new folder.")),e.props.onNewFolderCancel()},e.handleSetFileUploaderPath=function(t){var r=t?t.path:e.props.path,o=e.props.context.isCurrentPathWriteable();t&&t.hasOwnProperty("hasPermissionToUploadToFolder")&&(o=!!t.hasPermissionToUploadToFolder),e.props.setFileUploaderPath({path:r,hasPermissionToUploadToFolder:o})},e.handleDragStart=function(t,o){void 0===o&&(o=[]);var n=e.props,i=n.path,a=n.selectedFiles,l=n.user,d=c.keyBy(o,"fq_path");d=r.__assign({},d,a.toJS());var u=c.values(d);if(u.some(function(e){return T.File.isTeamSharedFolder(e)}))return void N.Notify.error(F._("Team folders can’t be moved."));if(u.some(function(e){return T.File.isTeamMemberFolder(e)}))return void N.Notify.error(F._("Your member folder can’t be moved."));var p=t.dataTransfer;p&&(p.setDragImage&&e.internalDragStatusRef&&p.setDragImage(s.findDOMNode(e.internalDragStatusRef),-10,-10),p.setData(y.INTERNAL_FILE_DATA_TRANSFER_TYPE,JSON.stringify({userId:l.id,fromPath:i,filePaths:u.map(function(e){return e.fq_path})})),p.effectAllowed="copyMove")},e.handleDragEnter=function(t,r,o,n){u.onFileDragEnterItem(r,!!e.props.isDraggingExternalFiles,!!e.props.isDraggingInternalFiles,o,n,e.props.context,e.handleSetDropTarget,e.handleSetFileUploaderPath)},e.handleSetDropTarget=function(t){e.setState({dropTarget:t})},e.handleSelectionChange=function(t){C.UEClient.sendEvent("FileItemRow","CheckboxToggled"),e.props.onSelectionChange(t)},e.handleDeselectAll=function(){var t=e.props,r=t.selection;(0,t.onSelectionChange)(r.set("selected",n.OrderedSet()))},e.handleSelectAll=function(){var t=e.props,r=t.items,o=t.selection;(0,t.onSelectionChange)(o.set("selected",n.OrderedSet(r.filter(I.canSelectItem).map(function(e){return e.fq_path}))))},e._handleGetOverflowMenuActions=function(t,r){var o=e.props;return(0,o.getOverflowMenuActions)(t,r,o.responsive)},e.handleTTI=function(){e.props.onComponentTTI("FilesViewController")},e.setFilesViewTileGridRef=function(t){e.filesViewTileGridRef=t},e.setInternalDragStatusRef=function(t){e.internalDragStatusRef=t},e.getIsCurrentPathWriteable=function(){return e.props.context.isCurrentPathWriteable()},e.onTilesPerRowChange=function(t){e.setState({tilesPerRow:t})},e}return r.__extends(I,t),I.prototype.componentDidMount=function(){var t=this;this.setupUnity(),document.addEventListener("keydown",this.handleKeyDownBody),document.addEventListener("mousedown",this.handleMouseDownBody),C.UEClient.registerBulkCallbackForEducationStep(P,function(){t.props.onSwitchViewType(d.ViewType.List)}),E.waitForTTI().then(function(){t.prewarmGridViewThumbStore();var o=function(e){var r=e.showKeyboardShortcutsModal;t.state.shouldShowKeyboardShortcutModal&&r(t.props.viewType===d.ViewType.List),t.setState({keyboardShortcutModalHandler:function(){r(t.props.viewType===d.ViewType.List)},shouldShowKeyboardShortcutModal:!1})};o.perfName="keyboard_shortcuts_modal",new Promise(function(t,r){e(["modules/clean/react/files_view/keyboard_shortcuts_modal"],t,r)}).then(r.__importStar).then(o)})},I.prototype.componentWillReceiveProps=function(e){if(e.context&&this.props.context&&e.context.currentFQPath!==this.props.context.currentFQPath){this.undoPrewarmGridViewThumbStore();var t=this.props.arePostTTIModulesLoaded?new D.GenericThumbStore:new M.BufferedThumbStore;this.setState({thumbStore:t})}},I.prototype.componentDidUpdate=function(e){e.context&&this.props.context&&e.context.currentFQPath!==this.props.context.currentFQPath&&this.prewarmGridViewThumbStore(),this.props.enableUnity&&e.items!==this.props.items&&this.triggerUnityChangeCallback&&this.triggerUnityChangeCallback(),e.path!==this.props.path&&this.handleScrollToTop()},I.prototype.componentWillUnmount=function(){this.triggerUnityChangeCallback=void 0,document.removeEventListener("keydown",this.handleKeyDownBody),document.removeEventListener("mousedown",this.handleMouseDownBody)},I.prototype.setupUnity=function(){return r.__awaiter(this,void 0,void 0,function(){var t,o=this;return r.__generator(this,function(n){switch(n.label){case 0:return[4,E.waitForTTI()];case 1:return n.sent(),[4,new Promise(function(t,r){e(["modules/clean/unity_browse_interface"],t,r)}).then(r.__importStar)];case 2:return t=n.sent().default,this.triggerUnityChangeCallback=function(){t.browse_visible_change_callback(o.props.items.toArray(),o.props.user.id,0,o.props.items.size-1)},[2]}})})},I.prototype.prewarmGridViewThumbStore=function(){var e=this;if(this.props.viewType!==d.ViewType.Grid){var t=this.state.thumbStore;this.props.items.slice(0,100).forEach(function(r){if(r instanceof T.File){var o=S.getThumbnailUrlForItem(r,f.ViewTypeThumbnailSizes[d.ViewType.Grid]);if(o){var n=t.bind_url(o,{onSuccess:x});n&&e.gridViewPrewarmedThumbnailRequestIds.push(n)}}})}},I.prototype.undoPrewarmGridViewThumbStore=function(){var e=this;this.gridViewPrewarmedThumbnailRequestIds.length&&(this.gridViewPrewarmedThumbnailRequestIds.forEach(function(t){e.state.thumbStore.unbind_url(t)}),this.gridViewPrewarmedThumbnailRequestIds=[])},I.prototype.handleScrollToTop=function(){window.scrollTo(0,0)},I.prototype.getFilesViewTileGridRef=function(){return this.filesViewTileGridRef},I.prototype.renderEmptyFolderView=function(){var e=this.props,t=e.context,r=e.responsive;if(this.props.customEmptyFolderView)return this.props.customEmptyFolderView(r);var o=t.isInsideSharedFolder,n=t.currentSharedFolderPermissionRole,i=o&&k.includes(n),a=i?void 0:F._("Drag and drop files onto this window to upload.");return l.createElement(p.EmptyFolderTable,{title:F._("This folder is empty"),subtitle:a,onTTI:this.handleTTI})},I.prototype.renderPinnedTeamFolderView=function(e){var t=this.props,r=t.context,o=t.dropTargetHighlightMode,n=t.onShowShare,i=t.renderSharedWithController,a=t.teamFolders,s=t.user,c=t.onRenameSubmit,d=t.onRenameCancel,u=this.state,p=u.dropTarget,m=u.isTabbing,h=u.thumbStore;return l.createElement(b.PinnedTeamFolderView,{activeDropTarget:p,columnFlex:f.LIST_VIEW_COLUMN_FLEX[1],context:r,dropTargetHighlightMode:o,getOverflowMenuActions:this._handleGetOverflowMenuActions,isCompactMode:e,isTabbing:m,onDragEnter:this.handleDragEnter,onNavigateToFileOrFolder:this.props.onNavigateToFileOrFolder,onRenameCancel:d,onRenameSubmit:c,teamFolders:a,user:s,arePostTTIModulesLoaded:this.props.arePostTTIModulesLoaded,thumbStore:h,onShowShare:n,renderSharedWithController:i})},I.prototype.getSelectAllCheckboxCheckedVariant=function(){var e=this.props,t=e.selectedFiles,r=e.items,o="unchecked";return t.size===r.filter(I.canSelectItem).size?o="checked":t.size&&(o="mixed"),o},I.prototype.isCreateFolderUIActive=function(){var e=this.props.createNewFolderState;return e&&"CREATE_FOLDER_INACTIVE"!==e},I.prototype.shouldShowEmptyFolderView=function(){return this.props.loadingState===d.LoadingState.LOADED&&!this.props.items.size&&!this.isCreateFolderUIActive()},I.canSelectItem=function(e){return e instanceof T.File},I.prototype.shouldComponentUpdate=function(e){return e.loadingState!==this.props.loadingState||e.loadingState!==d.LoadingState.LOADING_FIRST_PAGE},I.prototype.render=function(){var e=this,t=this.props,r=t.onDelete,n=t.onShowRename,s=t.onRenameSubmit,c=t.onRenameCancel,u=t.onSwitchViewType,p=t.onPasteFromClipboard,b=t.onColumnsChanged,T=t.onCanDisplayFolderSizesChanged,C=t.onFocusSearchBar,E=t.currentSort,y=t.createNewFolderState,F=t.context,N=t.columns,I=t.dropTargetHighlightMode,M=t.fileRename,D=t.getIsFileJumping,x=t.onAddFileJumpKeyCode,k=t.onResetFileJump,P=t.items,R=t.isSearchMode,O=t.isDraggingExternalFiles,L=t.isDraggingInternalFiles,A=t.isQueryingFolderSizes,V=t.isFileViewerShown,H=t.loadingState,B=t.onSortChange,G=t.path,U=t.selectedFiles,z=t.selection,q=t.shouldShowPinnedTeamFolders,W=t.renderSharedWithController,j=t.onShowShare,K=t.teamFolders,J=t.totalNumFiles,Y=t.user,Z=t.viewType,Q=t.viewTypes,X=t.viewTypeLabels,$=t.viewTypeColumns,ee=t.onLocationLinkClick,te=t.onNavigateToFileOrFolder,re=t.onNavigateToParentFolder,oe=t.onOpenPaper,ne=t.arePostTTIModulesLoaded,ie=t.onStarClick,ae=t.fileIdToActionCategories,le=t.pageHeaderHeight,se=t.disabledMultiselect,ce=this.props.responsive,de=ce.isMatchedLarge,ue=ce.isMatchedMedium,pe=this.state,me=pe.dropTarget,he=pe.thumbStore,fe=pe.isTabbing,_e=pe.keyboardShortcutModalHandler,be=pe.tilesPerRow;if(H===d.LoadingState.LOADING_FIRST_PAGE)return ne?l.createElement(i.MediaTableSkeleton,{numRows:15}):null;var ge=w.getItemIds(this.props),we=!de,Se=!!U.size;if(this.shouldShowEmptyFolderView())return l.createElement("div",{className:"brws-files-view"},q&&this.renderPinnedTeamFolderView(we),this.renderEmptyFolderView());var ve=de?f.DEFAULT_COLUMN_HEADER_HEIGHT:f.COMPACT_COLUMN_HEADER_HEIGHT,Te=ve+le,Ce=0;return q&&(Ce+=ve+ve+f.PINNED_TEAM_FOLDER_SECONDARY_HEADER_PADDING_TOP+K.size*f.DEFAULT_ROW_HEIGHT),l.createElement("div",{className:"brws-files-view"},q&&this.renderPinnedTeamFolderView(we),l.createElement(h.ColumnManager,{columns:N,viewTypeColumns:$,currentSort:E,onCanDisplayFolderSizesChanged:T,onColumnsChanged:b,isMatchedLarge:de,isMatchedMedium:ue,isSearchMode:R,viewType:Z},function(t){var i=t.visibleColumns,h=t.handleSelection,b=t.canDisplayFolderSizes,w=(R?f.LIST_VIEW_SEARCH_MODE_COLUMN_FLEX:f.LIST_VIEW_COLUMN_FLEX)[i.length],v=l.createElement(m.ColumnHeader,{columnFlex:w,currentSort:E,isCompactMode:we,isSelectMode:Se,isSticky:q,isTabbing:fe,onDeselectAll:e.handleDeselectAll,onSelectAll:e.handleSelectAll,onSelection:h,onSort:B,onSwitchViewType:u,selectAllCheckboxState:e.getSelectAllCheckboxCheckedVariant(),stickyOffsetHeight:ve,stickyOffsetTop:le,columns:N,visibleColumns:i,viewType:Z,viewTypes:Q,viewTypeLabels:X,onTTI:e.handleTTI});return Z===d.ViewType.List?l.createElement(g.SelectableList,{itemIds:ge,keyScope:g.SELECTABLE_LIST_KEY_SCOPE,onSelectionChange:e.handleSelectionChange,onTabbingStart:e.handleTabbingStart,selection:z,tilesPerRow:be},function(t){var d=t.focusedFileId,u=t.handleDeselect,m=(t.handleDeselectAll,t.handleFocusFile),h=t.handleSelect,f=(t.handleSelectAll,t.isSelectableListEvent);return l.createElement(a.Table,{"aria-rowcount":J,className:o.default("brws-files-view-list",{"brws-files-view-list-compact":we}),columnFlex:w},v,l.createElement(_.FilesViewList,{onDelete:r,onShowRename:n,activeDropTarget:me,context:F,createNewFolderState:y,disabledMultiselect:se||!1,dropTargetHighlightMode:I,items:P,fileIdToActionCategories:ae,fileRename:M,focusedFileId:d,getOverflowMenuActions:e._handleGetOverflowMenuActions,getIsCurrentPathWriteable:e.getIsCurrentPathWriteable,getIsFileJumping:D,onAddFileJumpKeyCode:x,onResetFileJump:k,isCompactMode:we,isDraggingExternalFiles:O,isDraggingInternalFiles:L,isFileViewerShown:V,isSearchMode:R,isSelectMode:Se,isSelectableListEvent:f,arePostTTIModulesLoaded:ne,isTabbing:fe,keyScope:g.SELECTABLE_LIST_KEY_SCOPE,onCopyToClipboard:e.handleCopyToClipboard,onDragStart:e.handleDragStart,onDragEnter:e.handleDragEnter,onDeselectFile:u,onFocusFile:m,onFocusSearchBar:C,onOpenKeyboardShortcutModal:_e,onLocationLinkClick:ee,onNavigateToFileOrFolder:te,onNavigateToParentFolder:re,onNewFolderCancel:e.handleNewFolderCancel,onNewFolderSubmit:e.handleNewFolderSubmit,onOpenPaper:oe,onPasteFromClipboard:p,onRenameCancel:c,onRenameSubmit:s,onSelectFile:h,onSetDropTarget:e.handleSetDropTarget,onSetFileUploaderPath:e.handleSetFileUploaderPath,onStarClick:ie,scrollPositionOffset:Ce,scrollToRow:d?ge.indexOf(d):0,selectedFiles:U,selection:z,renderSharedWithController:W,hrefForFile:e.props.hrefForFile,onShowShare:j,user:Y,viewportTopOffset:Te,visibleColumns:i,canDisplayFolderSizes:b,thumbStore:he,shareButtonLabel:e.props.shareButtonLabel,showShareButton:e.props.showShareButton,starredState:e.props.starredState}))}):l.createElement(g.SelectableList,{itemIds:ge,keyScope:g.SELECTABLE_TILE_GRID_KEY_SCOPE,onSelectionChange:e.handleSelectionChange,onTabbingStart:e.handleTabbingStart,selection:z,tilesPerRow:be},function(t){var o=t.handleDeselectAll,i=t.handleFocusFile,d=t.handleSelectAll;return l.createElement("div",null,l.createElement(a.Table,{columnFlex:f.GRID_VIEW_COLUMN_FLEX},v),l.createElement(S.FilesViewTileGrid,{onDelete:r,disabledMultiselect:se||!1,onShowRename:n,activeDropTarget:me,activeSortDirection:E&&E.sortDirection,activeSortField:E&&E.sortField,arePostTTIModulesLoaded:ne,createNewFolderState:y,context:F,deselectAll:o,dropTargetHighlightMode:I,fileRename:M,getOverflowMenuActions:e._handleGetOverflowMenuActions,getIsCurrentPathWriteable:e.getIsCurrentPathWriteable,getIsFileJumping:D,onAddFileJumpKeyCode:x,onResetFileJump:k,onTTI:e.handleTTI,items:P,isCreateFolderUIActive:e.isCreateFolderUIActive(),isDraggingExternalFiles:O,isDraggingInternalFiles:L,isQueryingFolderSizes:A,isSearchMode:R,onCopyToClipboard:e.handleCopyToClipboard,onDragEnter:e.handleDragEnter,onDragStart:e.handleDragStart,onFocusFile:i,onFocusSearchBar:C,onNewFolderCancel:e.handleNewFolderCancel,onNewFolderSubmit:e.handleNewFolderSubmit,onNavigateToFileOrFolder:te,onOpenPaper:oe,onOpenKeyboardShortcutModal:_e,onPasteFromClipboard:p,onRenameCancel:c,onRenameSubmit:s,onSelectionChange:e.handleSelectionChange,onSetDropTarget:e.handleSetDropTarget,onSortChange:B,onStarClick:ie,onTilesPerRowChange:e.onTilesPerRowChange,path:G,ref:e.setFilesViewTileGridRef,selectAll:d,selectedFiles:U,selection:z,onSetFileUploaderPath:e.handleSetFileUploaderPath,thumbStore:he,tilesPerRow:be,totalNumItems:J,user:Y,viewType:Z,starredState:e.props.starredState,hrefForFile:e.props.hrefForFile}))})}),l.createElement(v.InternalDragStatus,{className:"offscreen-drag-icon",files:U.toArray(),ref:this.setInternalDragStatusRef}))},I.defaultProps={dropTargetHighlightMode:d.DropTargetHighlightMode.NONE,enableUnity:!0,fileRename:null,loadingState:d.LoadingState.LOADING_FIRST_PAGE,fileIdToActionCategories:{}},I})(l.PureComponent);t.FilesViewController=R}),define("modules/clean/react/files_view/culled_table_body",["require","exports","tslib","spectrum/table","external/react"],function(e,t,r,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),
n=r.__importStar(n);var i=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rangeInViewStartIndex=0,t.rangeInViewEndIndex=0,t.handleRangeInView=function(e,r){var o="scrollingElement"in document&&document.scrollingElement?document.scrollingElement.scrollTop:document.documentElement.scrollTop,n=window.innerHeight-t.props.viewportTopOffset,i=t.props.listItemHeight,a=t.props.items.length,l=a*i;t.rangeInViewStartIndex=Math.floor(o/l*a),t.rangeInViewEndIndex=Math.ceil((o+n||1)/l*a)-1},t}return r.__extends(t,e),t.prototype.componentDidMount=function(){this.props.scrollToRow&&this.updateScroll(this.props.scrollToRow)},t.prototype.componentWillReceiveProps=function(e){this.props.scrollToRow!==e.scrollToRow&&e.scrollToRow!==-1&&this.updateScroll(e.scrollToRow)},t.prototype.updateScroll=function(e){var t=this.props,r=t.listItemHeight,o=t.viewportTopOffset;if(e<=this.rangeInViewStartIndex||e>=this.rangeInViewEndIndex){var n=document.body.scrollTop,i=window.innerHeight-o,a=(e+1)*r,l=e*r,s=0;s=l>n?Math.abs(i-a):a-r,window.scrollTo(0,s)}},t.prototype.render=function(){var e=this.props,t=e.viewportTopOffset,i=r.__rest(e,["viewportTopOffset"]);return n.createElement(o.CulledTableBody,r.__assign({onRangeInView:this.handleRangeInView,viewportHeight:window.innerHeight-t},i))},t.defaultProps={viewportTopOffset:0},t})(n.PureComponent);t.CulledTableBodyWithScrollToRow=i}),define("modules/clean/react/files_view/file_name_cell",["require","exports","tslib","external/classnames","spectrum/media_table","external/react","modules/clean/browse_interface","modules/clean/filepath","modules/clean/filetypes","modules/clean/react/files_view/constants","modules/clean/react/files_view/types","modules/clean/react/files_view/name_input","modules/clean/react/files_view/star","modules/clean/react/files_view/util","modules/clean/react/browse/models","modules/clean/react/icon/file_folder_icon","modules/clean/filename_highlights","modules/clean/user_education/react/user_education_effect","modules/core/i18n","modules/clean/react/title_bubble","modules/clean/em_string","spectrum/dimensions"],function(e,t,r,o,n,i,a,l,s,c,d,u,p,m,h,f,_,b,g,w,S,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importStar(i),l=r.__importStar(l);var T=(function(e){function t(r){var o=e.call(this,r)||this;return o._thumbRequestId=null,o.handleNameInputSubmit=function(e){o.props.onRenameSubmit(o.props.file,e)},o.handleNameInputCancel=function(){o.props.onRenameCancel(o.props.file)},o.handleOnClickNameInput=function(e){e.stopPropagation()},o.handleOnClickName=function(e){o.props.isTextSelectable||o.props.isSelectMode||m.shouldHandleClick(e)&&(e.preventDefault(),e.stopPropagation(),o.props.onNavigateToFileOrFolder(o.props.file))},o.handleOnClickLocationLink=function(e){var t=o.props,r=t.file,n=t.onLocationLinkClick,i=!m.shouldHandleClick(e);i||(e.preventDefault(),e.stopPropagation()),n&&n(r,i)},o.updateFilenameCellBufferIfNeeded=function(){var e=o._filenameContainerDiv;if(e){var t=e.getElementsByClassName("brws-file-name-cell-star");if(t&&t.length>0){var r=t.item(0).clientWidth;o.state.filenameCellBuffer!==r&&o.setState({filenameCellBuffer:r})}}},o.handleThumbnailError=function(){o.setState({thumbLoaded:!1})},o._setFilenameRef=function(e){return o._filenameDiv=e},o._setFilenameContainerRef=function(e){return o._filenameContainerDiv=e},o.onStarClick=function(e){var t=o.props,r=t.file,n=t.onStarClick;n&&n(r,e)},o.state={shouldShowTooltip:o.shouldShowTooltip(r),thumbLoaded:t.isThumbLoaded(r),filenameCellBuffer:24},o}return r.__extends(t,e),t.prototype.componentDidMount=function(){this.fetchThumbnail(this.props)},t.prototype.componentDidUpdate=function(e,t){var r=this.shouldShowTooltip(this.props);r!==t.shouldShowTooltip&&this.setState({shouldShowTooltip:r}),this.updateFilenameCellBufferIfNeeded()},t.prototype.componentWillReceiveProps=function(e){var t=this.shouldShowTooltip(e);t!==this.state.shouldShowTooltip&&this.setState({shouldShowTooltip:t}),e.file.thumbnail_url_tmpl!==this.props.file.thumbnail_url_tmpl&&(this.unbindThumbnailIfNeeded(),this.fetchThumbnail(e))},t.prototype.componentWillUnmount=function(){this.unbindThumbnailIfNeeded()},t.prototype.shouldShowTooltip=function(e){var t=this._filenameDiv,r=l.filename(e.file.fq_path);return!!(e.showTooltip&&t&&(t.offsetWidth<t.scrollWidth||t.textContent!==r))},t.isThumbLoaded=function(e){var t=e.file,r=e.thumbStore,o=t.thumbnail_url_tmpl;return!(!o||!r.get_thumb(o))},t.prototype.fetchThumbnail=function(e){var t=this,r=e.file,o=e.thumbStore,n=r.thumbnail_url_tmpl;n&&(this._thumbRequestId=o.bind_url(n,{onSuccess:function(){t.setState({thumbLoaded:!0})},onError:function(){t.handleThumbnailError()}}))},t.prototype.unbindThumbnailIfNeeded=function(){var e=this.props.thumbStore;this._thumbRequestId&&(e.unbind_url(this._thumbRequestId),this._thumbRequestId=null),this.setState({thumbLoaded:!1})},t.prototype.renderThumbnail=function(){var e=this.props,t=e.file,r=e.thumbStore,n=t.thumbnail_url_tmpl,a=t.fq_path;if(this.state.thumbLoaded&&n){var l=r.get_thumb(n);if(l)return i.createElement("img",{alt:a,draggable:!1,className:o.default("brws-file-name-cell-icon","brws-file-name-cell-thumb"),src:l,onError:this.handleThumbnailError})}return this.renderFileIcon()},t.prototype.renderFileIcon=function(){var e=this.props,t=e.file,r=e.showCDMUserEducationEffects,o=i.createElement(f.FileOrFolderIcon,{className:"brws-file-name-cell-icon",ref:"icon",file:t,onClick:this.handleOnClickName,showPreview:!1});return r?i.createElement(b.UserEducationEffect,{containerName:"FileItemRow",name:"TMFIcon",useSpan:!0},o):o},t.prototype.renderScreenReaderExtraInfo=function(){var e=[],t=this.props,r=t.file,o=t.isSelected;if(r.isDeleted&&e.push(g._("Deleted")),o&&e.push(g._("Selected")),r.is_dir&&(r.type===s.FileTypes.SHARED_FOLDER?h.File.isReadOnlySharedFolder(r)?e.push(g._("Read-only shared folder")):e.push(g._("Shared folder")):r.type===s.FileTypes.TEAM_SHARED_FOLDER?h.File.isReadOnlySharedFolder(r)?e.push(g._("Read-only team shared folder")):e.push(g._("Team shared folder")):e.push(g._("Folder"))),e.length>0)return i.createElement("span",{className:"ax-visually-hidden"},""+e.join(" "))},t.prototype.splitTruncatedParts=function(e,t){for(var r=0;r<e.length&&e.charAt(r)===t.charAt(r);)++r;return r===e.length||"…"!==e.charAt(r)?[e]:[e.substring(0,r),e.substring(r+1)]},t.prototype.getHighlightedSpan=function(e,t){var r=l.filename(t.fq_path),o=this.splitTruncatedParts(e,r);if(1===o.length)return t.highlight_spans?_.highlightReactFromHighlightSpans(e,t.highlight_spans):_.highlightMatchReact(e,t.filename_highlights);var n,a;return t.highlight_spans?(n=_.highlightReactFromHighlightSpans(r,t.highlight_spans,0,o[0].length),a=_.highlightReactFromHighlightSpans(r,t.highlight_spans,r.lastIndexOf(o[1]))):(n=_.highlightMatchReact(r,t.filename_highlights,0,o[0].length),a=_.highlightMatchReact(r,t.filename_highlights,r.lastIndexOf(o[1]))),i.createElement("span",null,n,"…",a)},t.prototype.renderTitle=function(e){var t=this.props,r=t.file,o=t.renameState,n=t.user,a=t.hrefForFile;if(o===d.RenameState.SAVING_INPUT)return i.createElement("span",{role:"status"},g._("Renaming…"));var s,u=l.filename(r.fq_path),p=this.truncateTextInFilenameCell(u,14,4,e);if(s=this.props.showHighlights&&(r.filename_highlights||r.highlight_spans)?this.getHighlightedSpan(p,r):i.createElement("span",null,p),s=i.createElement("div",{className:"brws-file-name-element",ref:this._setFilenameRef},s),this.state.shouldShowTooltip){var m=u.length<=c.FILE_NAME_TOOLTIP_MAX_LINE_LENGTH?u:i.createElement("div",{className:"brws-file-name-cell-tooltip"},u);s=i.createElement(w.TitleBubble,{content:m,position:w.TitleBubble.POSITIONS.BOTTOM,className:"list-label__title-bubble"},s)}if(!r.is_unmounted){var h=a(n,r);s=i.createElement("a",{className:"brws-file-name-cell-filename",href:h,onClick:this.handleOnClickName},s)}return this.props.showUserEducationEffects?i.createElement(b.UserEducationEffect,{containerName:"FileItemRow",name:this.props.userEducationEffectName||"FileNameLabel",useSpan:!0},s):s},t.prototype.renderSubtitle=function(e){var t=this.props,r=t.file,o=t.isSelectMode,n=t.renameState,s=t.renderLocationAsLink,c=t.showLocation,d=t.user;if(n||!c)return null;var u=l.parent_dir(r.fq_path),p="/"===u?a.get_browse_root_name(d):u.slice(1);if(r.is_unmounted)return g._("not added yet, in %(location)s",{comment:"Describes the parent directory of a file in a list of search results."}).format({location:p});var m=g._("in %(location)s",{comment:"Describes the parent directory of a file in a list of search results."}).format({location:p}),h=this.truncateTextInFilenameCell(m,12,6,e);if(!s||o)return h;var f=a.browse_uri_for_fq_path(d,u);return i.createElement("a",{className:"brws-file-name-cell-location",href:f.toString(),onClick:this.handleOnClickLocationLink},h)},t.prototype.truncateTextInFilenameCell=function(e,t,r,o){if(o&&o>this.state.filenameCellBuffer){var n=(o-this.state.filenameCellBuffer)/t,i=Math.max(r,n-r);return S.Emstring.em_snippet(e,Math.floor(i),.5)}return e},t.prototype.renderContent=function(e){var t,r=this.props,o=r.file,a=r.renameState;if(a===d.RenameState.PENDING_INPUT){var s=o.is_dir?g._("Rename directory…"):g._("Rename file…");t=i.createElement(u.NameInput,{defaultValue:l.filename(o.fq_path),label:s,onClick:this.handleOnClickNameInput,onSubmit:this.handleNameInputSubmit,onCancel:this.handleNameInputCancel,isDir:o.is_dir})}else t=[i.createElement(n.MediaCellText,{key:"title",highlight:this.props.isHovered},this.renderTitle(e),this.renderScreenReaderExtraInfo()),i.createElement(n.MediaCellText,{highlight:this.props.isHovered,key:"subtitle",variant:"subtitle"},this.renderSubtitle(e))];return t},t.prototype.renderStar=function(){var e=this.props,t=e.file,r=e.renameState,o=e.user,n=e.showStar,a=e.isSelectMode,l=e.isTabbing;return n&&!r?i.createElement(p.StarContainer,{item:t,user:o,className:"brws-file-name-cell-star brws-vertically-center",onStarClick:this.onStarClick,isReadOnly:a,isTabbing:l}):null},t.prototype.render=function(){var e=this,t=this.props.mediaActions,r=o.default("brws-file-name-cell-text","brws-vertically-center",{"brws-file-name-cell-text-rename":!!this.props.renameState});return this.props.shouldTruncateMiddleFilename?i.createElement(n.MediaCell,{icon:this.renderThumbnail()},i.createElement(v.Dimensions,{className:"brws-file-name-container"},function(t){var o=t.width;return i.createElement("div",{className:"brws-file-name-container",ref:e._setFilenameContainerRef},i.createElement("div",{className:r},e.renderContent(o)),e.renderStar())}),t):i.createElement(n.MediaCell,{icon:this.renderThumbnail()},i.createElement("div",{className:r},this.renderContent()),this.renderStar(),t)},t.defaultProps={renderLocationAsLink:!0},t})(i.Component);t.FileNameCell=T}),define("modules/clean/react/files_view/file_row",["require","exports","tslib","external/classnames","spectrum/button","spectrum/icon_table","spectrum/checkbox","spectrum/media_table","external/react","external/react-dom","modules/clean/react/files_view/file_name_cell","modules/clean/react/files_view/overflow_menu_with_star","modules/clean/react/files_view/types","modules/clean/react/files_view/share_button","modules/clean/react/files_view/util","modules/clean/react/browse/models","modules/clean/user_education/react/user_education_effect","modules/core/i18n","modules/clean/react/title_bubble","modules/core/browser","modules/clean/react/app_actions/app_actions_menu","modules/core/exception"],function(e,t,r,o,n,i,a,l,s,c,d,u,p,m,h,f,_,b,g,w,S,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),s=r.__importStar(s),c=r.__importStar(c),w=r.__importStar(w),v=r.__importStar(v);var T=function(){return s.createElement("span",{"aria-hidden":!0},"--")},C=function(e){var t=e.isVisible,r=e.onClick;return s.createElement(n.Button,{className:"brws-file-row-view-file-button","aria-label":b._("View File"),onClick:r,tabIndex:t?void 0:-1,variant:t?"secondary":"invisible"},s.createElement(i.IconTable,{name:"view"}))},E=function(){return s.createElement("svg",{width:"20px",height:"20px",viewBox:"0 0 20 20",version:"1.1"},s.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},s.createElement("g",{id:"Group",transform:"translate(2.000000, 2.000000)"},s.createElement("circle",{id:"Oval-65",cx:"8",cy:"8",r:"8"}),s.createElement("path",{d:"M8,13 L8,14.5 L5.5,12.5 L8,10.5 L8,12 C10.209139,12 12,10.209139 12,8 C12,6.93104698 11.5806921,5.96002857 10.8975817,5.24245012 L11.4674192,4.39763124 C12.4121861,5.30722218 13,6.58496544 13,8 C13,10.7614237 10.7614237,13 8,13 Z M8,3 L8,1.5 L10.5,3.5 L8,5.5 L8,4 C5.790861,4 4,5.790861 4,8 C4,8.96511539 4.34180174,9.8503987 4.91095749,10.5414022 L4.33270318,11.3986995 C3.5056268,10.5066799 3,9.3123877 3,8 C3,5.23857625 5.23857625,3 8,3 Z",id:"Oval-67",fill:"#637282"}))))},y=function(){return s.createElement("svg",{width:"20px",height:"20px",viewBox:"0 0 20 20",version:"1.1"},s.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},s.createElement("g",{id:"icon-warning",fill:"#637282"},s.createElement("path",{d:"M13.9298189,16.125 C16.4624689,16.125 17.5138484,14.3377448 16.2785476,12.1337797 L12.238298,4.92535765 C11.002815,2.72106753 8.99951926,2.72139251 7.76421846,4.92535765 L3.7239688,12.1337797 C2.48848585,14.3380698 3.54098311,16.125 6.07269759,16.125 L13.9298189,16.125 Z M11.002944,14.0995516 L8.99957244,14.0995516 L8.99957244,12.0741033 L11.002944,12.0741033 L11.002944,14.0995516 L11.002944,14.0995516 Z M11.002944,11.0613791 L8.99957244,11.0613791 L8.99957244,7.01048239 L11.002944,7.01048239 L11.002944,11.0613791 L11.002944,11.0613791 Z",id:"Shape"}))))},F=function(){return s.createElement("div",{className:"error-tooltip"},s.createElement("div",{className:"error-tooltip__title"},b._("This folder is too large")),b._("We can’t calculate the full size of this folder right now. This can happen when there are a large number of files inside of the folder or if the request takes too long."))},N=function(e){var t=e.file;if(!t.is_dir)return s.createElement("span",null,t.size);switch(t.fetchFolderSizesStatus){case p.FetchFolderSizeState.LOADING:return s.createElement("span",{className:"item-cell-title item-cell-title--loading"},s.createElement("span",{className:"ax-visually-hidden"},b._("Calculating folder sizes...")),s.createElement(E,null),b._("Calculating..."));case p.FetchFolderSizeState.ERROR:return s.createElement("span",{className:"item-cell-title"},s.createElement(g.TitleBubble,{content:s.createElement(F,null),position:g.TitleBubble.POSITIONS.TOP,isTargetPositionFixed:!1},s.createElement("span",{className:"ax-visually-hidden"},b._("Error in calculating folder sizes")),s.createElement("span",null,s.createElement(y,null))),t.size);case p.FetchFolderSizeState.COMPLETE:return s.createElement("span",{className:"item-cell-title"},t.size);default:return s.createElement(T,null)}},I=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isActionDropdownOpen:!1},t.checkboxRef=null,t.handleClick=function(e){if(t.checkboxRef&&c.findDOMNode(t.checkboxRef).contains(e.target))return void e.preventDefault();if(t.props.isSelectMode&&t.props.onDeselect&&t.props.onSelect){e.preventDefault();var r=t.props.file.fq_path;return void(t.props.isSelected?t.props.onDeselect(r,e.shiftKey):t.props.onSelect(r,e.shiftKey))}t.handleOpenNewTabOrNavigate(e)},t.handleOpenNewTabOrNavigate=function(e){if(0===e.button){if(e.preventDefault(),e.stopPropagation(),h.hasModifierKey(e)){var r=t.props,o=r.file,n=r.user,i=r.hrefForFile;return void w.open_tab(i(n,o))}t.props.onNavigateToFileOrFolder(t.props.file)}},t.handleChangeCheckbox=function(e,r){if(t.props.onSelect&&t.props.onDeselect){var o=t.props.file.fq_path;"checked"===e?t.props.onSelect(o,r.shiftKey):t.props.onDeselect(o,r.shiftKey)}},t.handleDragEnter=function(e){var r=t.props,o=r.file,n=r.isSelected,i=r.isActiveDropTarget;t.props.onDragEnter(e,o,!!n,!!i)},t.handleDragStart=function(e){var r=t.props,o=r.file,n=r.isSelected,i=r.onDragStart,a=r.onSelect;i&&(n?i(e):(a&&a(o.fq_path),i(e,[o])))},t.setCheckboxRef=function(e){t.checkboxRef=e},t.onActionDropdownOpen=function(){t.setState({isActionDropdownOpen:!0})},t.onActionDropdownClose=function(){t.setState({isActionDropdownOpen:!1})},t.rowChildFn=function(e){var r,n=e.isHovered,i=t.props,c=i.isCompactMode,d=i.isPinned,u=i.isSelectMode,p=i.isSelected,m=i.showUserEducationEffects,h=i.isTabbing,f=i.visibleColumns;if(!d){var b=!(h||n||p||u||c);r=s.createElement(a.Checkbox,{disabled:t.props.isCheckboxDisabled,checked:p?"checked":"unchecked",className:o.default("brws-checkbox",{"brws-checkbox-checked":p}),onChange:t.handleChangeCheckbox,ref:t.setCheckboxRef,variant:b?"invisible":"default"}),m&&(r=s.createElement(_.UserEducationEffect,{containerName:"FileItemRow",name:"FirstFileSelectCheckbox",useSpan:!0},r))}return[s.createElement(l.MediaCell,{key:"checkboxCell",className:"brws-checkbox-cell"},s.createElement("div",{className:"brws-vertically-center"},r))].concat(f.map(function(e,r){return t.renderCell({isHovered:n,isLastCell:r===f.length-1,sortField:e.sortField,renderCell:e.renderCell})}))},t}return r.__extends(t,e),t.prototype.componentDidUpdate=function(e){var t=this;(this.props.isFocused&&!e.isFocused||this.props.isFocused&&this.props.isSelected&&!e.isSelected)&&this.checkboxRef&&Promise.resolve().then(function(){if(t.checkboxRef){var e=c.findDOMNode(t.checkboxRef);e&&e.focus()}})},t.prototype.renderMediaActions=function(e){var t=this.props,o=t.file,n=t.isCompactMode,i=t.isSelected,a=t.isSelectMode,c=t.isSharingDisabled,d=t.isTabbing,p=t.getOverflowMenuActions,h=t.canDisplayFolderSizes,f=t.arePostTTIModulesLoaded,_=t.onShowShare,g=t.shareButtonLabel,w=t.showShareButton,v={file:o,onShowShare:_,shareButtonLabel:g,showShareButton:w};if(a)return s.createElement(l.MediaActions,null,!c&&s.createElement(m.ShareButton,r.__assign({},v,{isVisible:!n&&(i||e)})),!n&&(e||i)&&this.props.actionCategories?s.createElement(S.AppActionsMenu,{buttonText:b._("Open with ▾"),actionCategories:this.props.actionCategories,file:this.props.file,onDropdownOpen:this.onActionDropdownOpen,onDropdownClose:this.onActionDropdownClose,user:this.props.user,telemetryContext:{surface:"browse"}}):null,s.createElement(C,{isVisible:i||n||e,onClick:this.handleOpenNewTabOrNavigate}));var T=null;return f&&(T=s.createElement(u.OverflowMenuWithStar,{file:o,getOverflowMenuActions:p,showBorders:d||e,canDisplayFolderSizes:h,starredLoadingState:this.props.starredLoadingState,viewportTopOffset:this.props.viewportTopOffset})),s.createElement(l.MediaActions,null,!c&&s.createElement(m.ShareButton,r.__assign({},v,{isVisible:d||e&&!n||this.state.isActionDropdownOpen})),(d||e&&!n||this.state.isActionDropdownOpen)&&this.props.actionCategories?s.createElement(S.AppActionsMenu,{buttonText:b._("Open with ▾"),actionCategories:this.props.actionCategories,file:this.props.file,onDropdownOpen:this.onActionDropdownOpen,onDropdownClose:this.onActionDropdownClose,user:this.props.user,telemetryContext:{surface:"browse"}}):null,T)},t.prototype.renderModifiedCell=function(e,t){var r=e.ago,o=e.last_modified_name||void 0,n=o&&b._("by %(modified_by)s",{comment:"name of the person that modified the file"}).format({modified_by:o});return s.createElement(l.MediaCell,{className:"brws-file-modified-at-cell",key:"modifiedAt",subtitle:n,title:r||s.createElement(T,null)},t)},t.prototype.renderCell=function(e){var t=e.isHovered,r=e.isLastCell,o=e.sortField,n=e.renderCell,i=this.props,a=i.file,c=i.user,u=i.isCompactMode,m=i.isSearchMode,h=i.isSelectMode,_=i.isTabbing,b=i.arePostTTIModulesLoaded,g=i.renameState,w=i.showCDMUserEducationEffects,S=i.showUserEducationEffects,C=i.userEducationEffectName,E=i.onLocationLinkClick,y=i.onNavigateToFileOrFolder,F=i.onRenameCancel,I=i.onRenameSubmit,M=i.onStarClick,D=i.thumbStore,x=i.hrefForFile,k=r&&!(u&&g),P=k?this.renderMediaActions(t):void 0;if(n)return n({file:a,mediaActions:P});switch(o){case p.SortField.FILENAME:return s.createElement(d.FileNameCell,{key:"fileName",user:c,file:a,isHovered:t,isSelectMode:h,isTabbing:_,mediaActions:P,onNavigateToFileOrFolder:y,onLocationLinkClick:E,onRenameCancel:F,onRenameSubmit:I,renameState:g,showCDMUserEducationEffects:w,showTooltip:b,showHighlights:m,showLocation:m,showUserEducationEffects:S,userEducationEffectName:C,showStar:b&&!f.File.isNoAccessSharedFolder(a),onStarClick:M,thumbStore:D,shouldTruncateMiddleFilename:b,hrefForFile:x});case p.SortField.MODIFIED:return this.renderModifiedCell(a,P);case p.SortField.SHARED_WITH:return s.createElement(l.MediaCell,{className:"brws-file-shared-with-cell",key:"sharedWith"},this.props.renderSharedWithController(a),P);case p.SortField.CATEGORY:return s.createElement(l.MediaCell,{className:"brws-file-category-cell",key:"category",title:f.File.getCategoryDescription(a)},P);case p.SortField.EXTENSION:return s.createElement(l.MediaCell,{className:"brws-file-extension-cell",key:"extension",title:f.File.getExtension(a)},P);case p.SortField.SIZE:return s.createElement(l.MediaCell,{className:"brws-file-size-cell",key:"size",title:s.createElement(N,{file:a})},P);default:return v.reportException({err:new Error("renderCell function for "+o+"is not implemented"),severity:v.SEVERITY.NONCRITICAL,tags:["js:browse"]}),s.createElement(T,null)}},t.prototype.render=function(){var e=this.props,t=e.file,n=e.isActiveDropTarget,i=e.isAvailableDropTarget,a=e.isPinned,c=e.isSelected,d=e.renameState,u=e.rowIndex,p=e.tabIndex,m=e.topOffset,h=o.default("brws-file-row",{"brws-file-row-selected":c,"brws-file-row-deleted":t.isDeleted,"brws-file-row-droppable":i&&!n,"brws-file-row-dragover":n,"brws-file-row-no-access":f.File.isNoAccessSharedFolder(t),"brws-file-row-pinned":a}),_=n?"dragover":i&&!n?"droppable":c?"selected":"default",b={"aria-rowindex":void 0!==u?u+1:void 0,className:h,"data-filename":t.fq_path.split("/").slice(-1),onClick:this.handleClick,onDragEnter:this.handleDragEnter,tabIndex:p,variant:_};return a?s.createElement(l.MediaRow,r.__assign({},b),this.rowChildFn):s.createElement(l.CulledMediaRow,r.__assign({},b,{draggable:!d,topOffset:m,onDragStart:this.handleDragStart}),this.rowChildFn)},t.defaultProps={isSelectionEmpty:!0,topOffset:0},t})(s.PureComponent);t.FileRow=I}),define("modules/clean/react/files_view/fixed_table_head",["require","exports","tslib","spectrum/vertically_fixed","spectrum/table","external/react"],function(e,t,r,o,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=r.__importStar(i),t.FixedTableHead=function(e){var t=e.children,a=e.offsetHeight,l=r.__rest(e,["children","offsetHeight"]);return i.createElement("thead",r.__assign({className:"mc-table-head mc-table-head-fixed brws-column-header"},l),i.createElement(o.VerticallyFixed,{tag:function(e){var o=e.style;return i.createElement(n.TableRow,{className:"mc-table-head-row mc-table-head-row-fixed",style:r.__assign({height:a},o)},t)}}))}}),define("modules/clean/react/files_view/internal_drag_status",["require","exports","tslib","external/classnames","external/react","modules/clean/react/sprite"],function(e,t,r,o,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),n=r.__importStar(n);var a=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.className,r=e.files,a=o.default("active",t);return n.createElement("div",{id:"drag-status",className:a},n.createElement("div",{id:"drag-selection-status"},r.slice(0,4).map(function(e,t){return e.thumbnail_url_tmpl?n.createElement("img",{key:t,src:e.thumbnail_url_tmpl,className:"icon icon"+t,alt:""}):n.createElement(i.Sprite,{key:t,group:"web",name:e.icon,className:"icon icon"+t,alt:""})}),n.createElement("span",{className:"badge"},r.length)))},t})(n.PureComponent);t.InternalDragStatus=a}),define("modules/clean/react/files_view/list",["require","exports","tslib","external/react","modules/clean/react/files_view/drag_and_drop","modules/clean/react/files_view/constants","modules/clean/react/files_view/culled_table_body","modules/clean/react/files_view/file_row","modules/clean/react/files_view/new_folder_row","modules/clean/react/files_view/paper_row","modules/clean/react/files_view/selectors","modules/clean/react/files_view/keyboard_shortcuts","modules/clean/react/browse/models"],function(e,t,r,o,n,i,a,l,s,c,d,u,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importStar(o);var m=function(){},h=(function(t){function h(){var r=null!==t&&t.apply(this,arguments)||this;return r.state={scrollToRow:0},r.handleFileViewerUnmount=function(){var e=r.props.selectedFiles.first();e&&r.props.onFocusFile(e.fq_path)},r.getIsListEvent=function(e){return r.props.isSelectableListEvent()&&(!(e.target instanceof Element)||"BUTTON"!==e.target.tagName)},r.getSelectedFiles=function(){return r.props.selectedFiles},r.handleNavigateToFileOrFolder=function(e){r.props.onNavigateToFileOrFolder(e,r.handleFileViewerUnmount)},r.enableContextMenu=function(){return!1},r.getActiveDropTarget=function(){return r.props.activeDropTarget},r.getIsDraggingInternalFiles=function(){return!!r.props.isDraggingInternalFiles},r.getIsDraggingExternalFiles=function(){return!!r.props.isDraggingExternalFiles},r.renderRow=function(t,n,i){if("NewFolderRow"===t.type)return o.createElement(s.NewFolderRow,{createNewFolderState:t.props.createNewFolderState,isInsideMyTeamFolderTree:t.props.isInsideMyTeamFolderTree,onCancel:r.props.onNewFolderCancel,onSubmit:r.props.onNewFolderSubmit,rowIndex:n,topOffset:i});if("PaperRow"===t.type)return o.createElement(c.PaperRow,{paper:t.props.paper,rowIndex:n,topOffset:i,user:r.props.user,visibleColumns:t.props.visibleColumns,onOpenPaper:r.props.onOpenPaper,arePostTTIModulesLoaded:t.props.arePostTTIModulesLoaded});var a=r.props,d=a.selection,u=a.starredState,m=t.props.file,h=d.selected.last()===t.props.file.fq_path||!d.selected.size&&0===n?0:void 0,f=0===n||r.props.user.is_cdm_member&&(2===n||1===n),_=t.props.actionCategories,b=void 0;if(u){b=u[e("modules/clean/react/starred/browse_exports").HOME_RESOURCE_ID_TYPE.ENCODED_FILE_OBJ_ID+":"+m.file_id]}return o.createElement(l.FileRow,{actionCategories:_,context:r.props.context,file:m,getOverflowMenuActions:r.props.getOverflowMenuActions,isActiveDropTarget:t.props.isActiveDropTarget,isCheckboxDisabled:t.props.isCheckboxDisabled,isAvailableDropTarget:t.props.isAvailableDropTarget,isCompactMode:t.props.isCompactMode,isFocused:t.props.isFocused,isSearchMode:t.props.isSearchMode,isSelectMode:t.props.isSelectMode,isSelected:t.props.isSelected,arePostTTIModulesLoaded:t.props.arePostTTIModulesLoaded,isSharingDisabled:t.props.isSharingDisabled,isTabbing:t.props.isTabbing,key:m.fq_path,onDeselect:r.props.onDeselectFile,onDragStart:r.props.onDragStart,onDragEnter:r.props.onDragEnter,onLocationLinkClick:r.props.onLocationLinkClick,onNavigateToFileOrFolder:r.handleNavigateToFileOrFolder,onRenameCancel:r.props.onRenameCancel,onRenameSubmit:r.props.onRenameSubmit,onSelect:r.props.onSelectFile,onStarClick:r.props.onStarClick,renameState:t.props.renameState,rowIndex:n,showUserEducationEffects:f,userEducationEffectName:f?"FileNameLabel-"+n:void 0,showCDMUserEducationEffects:p.File.isTeamMemberFolder(m),tabIndex:h,topOffset:i,user:r.props.user,visibleColumns:r.props.visibleColumns,canDisplayFolderSizes:r.props.canDisplayFolderSizes,thumbStore:r.props.thumbStore,renderSharedWithController:r.props.renderSharedWithController,hrefForFile:r.props.hrefForFile,onShowShare:r.props.onShowShare,shareButtonLabel:r.props.shareButtonLabel,showShareButton:r.props.showShareButton,starredLoadingState:b,viewportTopOffset:r.props.viewportTopOffset})},r}return r.__extends(h,t),h.prototype.componentDidMount=function(){var e=this.props.onTTI;e&&e(),this.setupKeyboardShortcuts(),this.setupExternalDragHandler(),this.props.selectedFiles.size&&!this.props.isFileViewerShown()&&this.setState({scrollToRow:this.getRowIndexForFile(this.props.selectedFiles.first())})},h.prototype.componentWillReceiveProps=function(e){this.props.scrollToRow!==e.scrollToRow&&this.setState({scrollToRow:e.scrollToRow})},h.prototype.componentDidUpdate=function(e){e.createNewFolderState===this.props.createNewFolderState||"PENDING_INPUT"!==this.props.createNewFolderState||this.props.isFileViewerShown()||this.setState(function(e){return 0===e.scrollToRow?(window.scrollTo(0,0),{scrollToRow:e.scrollToRow}):{scrollToRow:0}})},h.prototype.componentWillUnmount=function(){this.cleanupKeyboardShortcuts(),n.cleanupExternalDragHandler(this.props.keyScope)},h.prototype.getRowIndexForFile=function(e){return this.props.items.indexOf(e)},h.prototype.cleanupKeyboardShortcuts=function(){u.resetFilesViewKeyboardShortcuts(this.props.keyScope),u.resetFileJumpKeyboardShortcuts(this.props.keyScope)},h.prototype.setupKeyboardShortcuts=function(){var e=this,t=this.props,r=t.onDelete,o=t.onShowRename,n=t.getIsFileJumping,i=t.onAddFileJumpKeyCode,a=t.onResetFileJump,l=t.keyScope,s=t.onCopyToClipboard,c=t.onNavigateToParentFolder,d=t.onPasteFromClipboard;u.setupFileJumpKeyboardShortcuts({scope:l,getIsFileJumping:n,onAddFileJumpKeyCode:i,onResetFileJump:a}),u.setupFilesViewListKeyboardShortcuts({getIsGlobalEvent:this.getIsGlobalEvent(),getIsItemEvent:this.getIsListEvent,getSelectedFiles:this.getSelectedFiles,isCurrentPathWriteable:this.props.getIsCurrentPathWriteable,enableContextMenu:this.enableContextMenu,selectAllAction:m,deselectAllAction:m,onCopyToClipboard:s,onDelete:r,onFocusSearchBar:this.props.onFocusSearchBar,onNavigateToFileOrFolder:this.handleNavigateToFileOrFolder,onNavigateToParentFolder:c,onPasteFromClipboard:d,onShowRename:o,openContextMenuAtPosition:m,scope:l,onShowHelpMenu:function(){return e.props.onOpenKeyboardShortcutModal()}})},h.prototype.setupExternalDragHandler=function(){n.setupExternalDragHandler(this.props.keyScope,this.getIsDraggingInternalFiles,this.getIsDraggingExternalFiles,this.props.onSetFileUploaderPath,".brws-file-row",this.getActiveDropTarget,this.props.onSetDropTarget)},h.prototype.getIsGlobalEvent=function(){return u.generateGetIsGlobalEvent(this)},h.prototype.render=function(){var e=this.props,t=e.scrollPositionOffset,r=e.viewportTopOffset;return o.createElement(a.CulledTableBodyWithScrollToRow,{items:d.getFilesViewListRowItems(this.props),listItemHeight:i.DEFAULT_ROW_HEIGHT,renderRow:this.renderRow,scrollPositionOffset:t,scrollToRow:this.state.scrollToRow,shouldUseWindowAsScrollContainer:!0,viewportTopOffset:r})},h.defaultProps={isFileViewerShown:function(){return!1}},h})(o.PureComponent);t.FilesViewList=h}),define("modules/clean/react/files_view/new_folder_row",["require","exports","tslib","spectrum/media_table","spectrum/table","external/react","spectrum/icon_content","modules/clean/react/files_view/name_input","modules/core/i18n"],function(e,t,r,o,n,i,a,l,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=r.__importStar(i),t.NewFolderRow=function(e){var r,a=e.createNewFolderState,c=e.isInsideMyTeamFolderTree,d=void 0!==c&&c,u=e.onCancel,p=e.onSubmit,m=e.rowIndex,h=e.topOffset;r="SAVING_INPUT"===a?i.createElement("p",{className:"brws-new-folder-row-status",role:"status","aria-live":"polite"},s._("Creating new folder…")):i.createElement(l.NameInput,{defaultValue:"",label:s._("Folder name"),onSubmit:p,onCancel:u});var f=i.createElement(t.NewFolderIcon,{isInsideMyTeamFolderTree:d});return i.createElement(o.CulledMediaRow,{"aria-rowindex":void 0!==m?m+1:void 0,className:"brws-new-folder-row",topOffset:h},i.createElement(n.TableCell,{className:"brws-checkbox-cell"}),i.createElement(o.MediaCell,{icon:f},i.createElement("div",{className:"brws-new-folder-row-content brws-vertically-center"},r)),i.createElement(n.TableCell,null),i.createElement(n.TableCell,null))},t.NewFolderIcon=function(e){var t=e.isInsideMyTeamFolderTree,r=e.className||"";return i.createElement(a.IconContent,{className:r,
name:t?"folder_team-small":"folder-small"})}}),define("modules/clean/react/files_view/paper_row",["require","exports","tslib","external/react","spectrum/media_table","modules/clean/paper_formatting_utils","modules/clean/react/files_view/star","modules/clean/react/files_view/types","modules/clean/react/files_view/util","modules/core/i18n","modules/core/browser"],function(e,t,r,o,n,i,a,l,s,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importStar(o),i=r.__importStar(i),d=r.__importStar(d);var u=(function(e){function t(t){var r=e.call(this,t)||this;return r.handleClick=function(e){if(0===e.button){e.preventDefault(),e.stopPropagation();var t=r.props.paper;if(s.hasModifierKey(e))return void d.open_tab(t.url);r.props.onOpenPaper(t)}},r.state=r.calcState(t),r}return r.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){if(this.props.paper.title!==e.paper.title||this.props.paper.highlight_spans!==e.paper.highlight_spans){var t=this.calcState(e);this.setState(t)}},t.prototype.calcState=function(e){return{titleParts:i.getPaperDocTitleParts(e.paper,"brws-file-name-cell-icon","brws-file-name-cell-icon-emoji")}},t.prototype.renderDocName=function(e){var t=this.props,r=t.paper,i=t.showHighlights,l=t.user,s=t.arePostTTIModulesLoaded,d=this.state.titleParts,u=d.title,p=d.highlightedTitle,m=d.icon,h=o.createElement("a",{className:"brws-paper-doc-name-cell-title",href:r.url,onClick:this.handleClick},i?p:o.createElement("span",null,u)),f=s?o.createElement(a.StarContainer,{item:r,user:l,key:"paperStar",className:"brws-file-name-cell-star brws-vertically-center"}):null;return o.createElement(n.MediaCell,{highlight:e,icon:m,key:"docName"},o.createElement("div",{className:"brws-paper-doc-name-cell-content brws-vertically-center"},o.createElement(n.MediaCellText,{highlight:e},h),o.createElement(n.MediaCellText,{highlight:e,variant:"subtitle"},c._("in Paper",{comment:"The Dropbox Paper page"}))),f)},t.prototype.renderDocInfo=function(){var e=this.props.paper,t=e.last_modified_date||"",r=c._("by %(modified_by)s",{comment:"name of the person that modified the file"}).format({modified_by:e.last_editor_name||e.creator_name});return o.createElement(n.MediaCell,{key:"docInfo",subtitle:r,title:t})},t.prototype.renderCell=function(e){var t=e.isHovered;switch(e.sortField){case l.SortField.FILENAME:return this.renderDocName(t);case l.SortField.MODIFIED:return this.renderDocInfo()}return null},t.prototype.render=function(){var e=this,t=this.props,r=t.rowIndex,i=t.topOffset,a=t.visibleColumns;return o.createElement(n.CulledMediaRow,{"aria-rowindex":void 0!==r?r+1:void 0,className:"brws-paper-row",draggable:!1,onClick:this.handleClick,topOffset:i,variant:"default"},function(t){var r=t.isHovered;return[o.createElement(n.MediaCell,{key:"checkboxCell",className:"brws-checkbox-cell"})].concat(a.map(function(t){return e.renderCell({isHovered:r,sortField:t.sortField})}))})},t.defaultProps={showHighlights:!0},t})(o.PureComponent);t.PaperRow=u}),define("modules/clean/react/files_view/pinned_team_folder_view",["require","exports","tslib","external/classnames","spectrum/table","modules/clean/browse_uri_interface","modules/clean/react/browse/models","modules/clean/react/files_view/constants","modules/clean/react/files_view/file_list_utils","modules/clean/react/files_view/file_row","external/react","modules/clean/react/sprite","modules/constants/trademark","modules/core/i18n","modules/clean/react/tooltip","modules/clean/user_education/user_education_client","modules/clean/user_education/react/user_education_effect"],function(e,t,r,o,n,i,a,l,s,c,d,u,p,m,h,f,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),d=r.__importStar(d);var b=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.displayName="PinnedTeamFolderView",t.renderTeamFolderRow=function(e,r){var o=t.props,n=o.activeDropTarget,u=o.context,p=o.dropTargetHighlightMode,m=o.getOverflowMenuActions,h=o.isTabbing,f=o.onDragEnter,b=o.onNavigateToFileOrFolder,g=o.onRenameCancel,w=o.onRenameSubmit,S=o.user,v=o.arePostTTIModulesLoaded,T=o.thumbStore,C=o.onShowShare,E=o.renderSharedWithController,y=s.shouldFileBeHighlightedDropTarget({dropTargetHighlightMode:p,file:e,isSelected:!1}),F=d.createElement(c.FileRow,{context:u,file:e,getOverflowMenuActions:m,key:encodeURI(e.fq_path),isAvailableDropTarget:y,isActiveDropTarget:e===n,isPinned:!0,arePostTTIModulesLoaded:v,isTabbing:h,onDragEnter:f,onNavigateToFileOrFolder:b,onRenameCancel:g,onRenameSubmit:w,showUserEducationEffects:0===r,showCDMUserEducationEffects:a.File.isTeamMemberFolder(e),user:S,visibleColumns:l.LIST_VIEW_COLUMNS.slice(0,1),canDisplayFolderSizes:!1,thumbStore:T,onShowShare:C,renderSharedWithController:E,hrefForFile:i.href_for_file});return r>0?F:d.createElement(_.UserEducationEffect,{containerName:"PinnedTeamFolder",name:"TeamFolder",key:encodeURI(e.fq_path)+"-UserEducationEffect"},F)},t}return r.__extends(t,e),t.prototype.componentDidMount=function(){f.UEClient.sendEvent(this.displayName,"componentDidMount",JSON.stringify(this.props.context))},t.prototype.renderHeaderTitle=function(e,t){var r=t?d.createElement("span",{className:"brws-pinned-team-folder-info-button"},d.createElement(h.Tooltip,{position:h.TooltipPosition.RIGHT,tooltip_contents:d.createElement("div",null,t),tooltip_classname:"brws-pinned-team-folder-tooltip"},d.createElement(u.Sprite,{group:"web",name:"info",alt:m._("File section information")}))):null;return d.createElement("span",{className:"brws-pinned-team-folder-header-title"},d.createElement("span",null,e),r)},t.prototype.render=function(){var e=this.props,t=e.columnFlex,r=e.isCompactMode,i=e.teamFolders,a=m.ungettext("Team folder","Team folders",i.size);return d.createElement("div",{className:"brws-pinned-team-folder-view"},d.createElement(n.Table,{columnFlex:t},d.createElement(n.TableHead,{className:o.default("brws-column-header","brws-pinned-team-folder-header",{"brws-column-header-compact brws-pinned-team-folder-header-compact ":r})},d.createElement(n.TableHeadCell,{className:"brws-checkbox-cell"}),d.createElement(n.TableHeadCell,{className:"brws-vertically-center"},this.renderHeaderTitle(a,m._("Team folders are the hub of content for a team and contents are                 automatically shared with team folder members. %(trademark_business)s                 team admins own and manage team folders.").format({trademark_business:p.TRADEMARK_BUSINESS})))),d.createElement(n.TableBody,null,i.map(this.renderTeamFolderRow))),d.createElement(n.Table,{columnFlex:t},d.createElement(n.TableHead,{className:o.default("brws-column-header","brws-pinned-team-folder-header","brws-pinned-team-folder-header-secondary",{"brws-column-header-compact brws-pinned-team-folder-header-compact ":r})},d.createElement(n.TableHeadCell,{className:"brws-checkbox-cell"}),d.createElement(n.TableHeadCell,{className:"brws-vertically-center"},this.renderHeaderTitle(m._("Everything else"))))))},t})(d.Component);t.PinnedTeamFolderView=b}),define("modules/clean/react/files_view/selectors",["require","exports","tslib","external/reselect","modules/clean/react/files_view/file_list_utils","modules/clean/react/browse/models"],function(e,t,r,o,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o.createSelector(function(e){return e.isCompactMode},function(e){return e.isSelectMode},function(e){return e.arePostTTIModulesLoaded},function(e){return e.isSearchMode},function(e){return e.isTabbing},function(e){return e.canDisplayFolderSizes},function(e){return e.starredState},function(e){return e.disabledMultiselect},function(e,t,r,o,n,i,a,l){return{isCompactMode:e,isSelectMode:t,arePostTTIModulesLoaded:r,isSearchMode:o,isTabbing:n,canDisplayFolderSizes:i,starredState:a,isCheckboxDisabled:l}});t.getFilesViewListRowItems=o.createSelector(a,function(e){return e.activeDropTarget},function(e){return e.context},function(e){return e.createNewFolderState},function(e){return e.dropTargetHighlightMode},function(e){return e.items},function(e){return e.fileRename},function(e){return e.focusedFileId},function(e){return e.selection},function(e){return e.user},function(e){return e.visibleColumns},function(e){return e.fileIdToActionCategories},function(e,t,o,a,l,s,c,d,u,p,m,h){var f=s.toArray().map(function(a){if(a instanceof i.Paper)return{type:"PaperRow",props:{isSearchMode:e.isSearchMode,paper:a,visibleColumns:m,arePostTTIModulesLoaded:e.arePostTTIModulesLoaded}};var s=u.selected.has(a.fq_path),f=n.shouldFileBeHighlightedDropTarget({file:a,isSelected:s,dropTargetHighlightMode:l});return{type:"FileRow",props:r.__assign({},e,{file:a,isActiveDropTarget:f&&t===a,isAvailableDropTarget:f,isFocused:a.fq_path===d,isSelected:s,isSharingDisabled:n.isSharingDisabledForFile({context:o,file:a,user:p}),renameState:c&&c.file.fq_path===a.fq_path?c.state:void 0,visibleColumns:m,actionCategories:h?h[a.file_id]:void 0})}});return a&&"CREATE_FOLDER_INACTIVE"!==a&&f.unshift({type:"NewFolderRow",props:{createNewFolderState:a,isInsideMyTeamFolderTree:o.isInsideTeamFolderTree}}),f}),t.getItemIds=o.createSelector(function(e){return e.items},function(e){return e.toArray().map(function(e){return e.fq_path})})}),define("modules/clean/react/files_view/share_button",["require","exports","tslib","spectrum/button","external/react","modules/core/i18n"],function(e,t,r,o,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importStar(n);var a=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(e){e.preventDefault();var r=t.props,o=r.file;(0,r.onShowShare)(o,"BROWSE_FILE_ROW"),e.stopPropagation()},t}return r.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.isVisible,r=e.shareButtonLabel,i=e.showShareButton;return n.createElement(o.Button,{"aria-label":r,className:"inline-share-button",onClick:this.handleClick,tabIndex:t&&i?void 0:-1,variant:t&&i?"secondary":"invisible"},r)},t.defaultProps={isVisible:!0,shareButtonLabel:i._("Share"),showShareButton:!0},t})(n.PureComponent);t.ShareButton=a}),define("modules/clean/react/files_view/sticky_table_head",["require","exports","tslib","spectrum/dimensions","spectrum/table","external/react","modules/clean/react/sticky/sticky","modules/clean/react/sticky/container"],function(e,t,r,o,n,i,a,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=r.__importStar(i),t.StickyTableHead=function(e){var t=e.children,s=e.columnFlex,c=e.offsetHeight,d=e.offsetTop,u=r.__rest(e,["children","columnFlex","offsetHeight","offsetTop"]);return i.createElement("thead",{className:"brws-sticky-table-head"},i.createElement(o.Dimensions,{tagName:"tr"},function(e){var o=e.width;return i.createElement("td",{className:"brws-sticky-table-cell"},i.createElement(l.StickyContainer,{offsetTop:d,useNativeSticky:!0,useWindowToDetermineBottom:!0},i.createElement(a.Sticky,{offsetHeight:c},i.createElement(n.Table,{columnFlex:s,style:{width:o}},i.createElement(n.TableHead,r.__assign({},u),t)))))}))}}),define("modules/clean/react/files_view/view_type_column_header_menu",["require","exports","tslib","external/react","spectrum/icon_form","spectrum/icon_mode","spectrum/popover","modules/clean/react/files_view/types","modules/core/i18n"],function(e,t,r,o,n,i,a,l,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importStar(o);var c=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleSelection=function(e){e!==t.props.viewType&&t.props.onSwitchViewType(e)},t}return r.__extends(t,e),t.prototype.componentDidMount=function(){this.props.onTTI()},t.prototype.viewTypeIcon=function(e){switch(e){case l.ViewType.List:return"list";case l.ViewType.Grid:return"grid";case l.ViewType.LargeGrid:return"tiles"}return"list"},t.prototype.render=function(){var e=this,t=this.props,r=t.viewType,l=t.viewTypes,c=t.viewTypeLabels;return 1===l.length?null:o.createElement(a.Popover,{className:"brws-view-type-column-header-menu",onSelection:this.handleSelection},o.createElement(a.PopoverTrigger,{className:"brws-view-type-column-header-menu-trigger",title:c[r]},o.createElement(i.IconMode,{name:this.viewTypeIcon(r)}),o.createElement(n.IconForm,{name:"caret-down"})),o.createElement(a.PopoverContent,{attachment:"right",className:"brws-view-type-column-header-menu-content"},o.createElement(a.PopoverItemGroup,null,o.createElement(a.PopoverItemGroupTitle,null,s._("View As")),l.map(function(t){return o.createElement(a.PopoverSelectableItem,{"data-viewtype":t,key:t,icon:o.createElement(i.IconMode,{name:e.viewTypeIcon(t)}),selected:r===t,value:t},c[t])}))))},t})(o.PureComponent);t.ViewTypeColumnHeaderMenu=c}),define("spectrum/icon_bundles/mode",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ICONS={grid:{attrs:{width:"24",height:"24",viewBox:"0 0 24 24"},innerHtml:'<g fill="#637282" fill-rule="evenodd"><path d="M7 7h2v2H7zM11 7h2v2h-2zM15 7h2v2h-2zM7 11h2v2H7zM11 11h2v2h-2zM15 11h2v2h-2zM7 15h2v2H7zM11 15h2v2h-2zM15 15h2v2h-2z"></path></g>'},list:{attrs:{width:"24",height:"24",viewBox:"0 0 24 24"},innerHtml:'<g fill="#637282" fill-rule="evenodd"><path d="M6 15h2v2H6zM10 15h8v2h-8zM6 11h2v2H6zM10 11h8v2h-8zM6 7h2v2H6zM10 7h8v2h-8z"></path></g>'},tiles:{attrs:{width:"24",height:"24",viewBox:"0 0 24 24"},innerHtml:'<g fill="#637282" fill-rule="evenodd"><path d="M7 7h4v4H7zM13 7h4v4h-4zM13 13h4v4h-4zM7 13h4v4H7z"></path></g>'}}}),define("spectrum/icon_mode",["require","exports","tslib","tslib","react","spectrum/icon_templates/stateless","spectrum/icon_bundles/mode"],function(e,t,r,o,n,i,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importStar(o),n=r.__importStar(n),t.ICONS=a.ICONS,t.IconMode=function(e){var t=e.name,r=a.ICONS[t],l=r.attrs,s=r.innerHtml,c=n.createElement("svg",o.__assign({},l,{dangerouslySetInnerHTML:{__html:s}}));return n.createElement(i.Component,o.__assign({icon:c},e,{key:t}))},t.IconMode.displayName="IconMode"}),define("spectrum/label",["require","exports","tslib","spectrum/label/label"],function(e,t,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r.__exportStar(o,t)}),define("spectrum/label/label",["require","exports","tslib","tslib","classnames","react"],function(e,t,r,o,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importStar(o),n=r.__importDefault(n),i=r.__importStar(i),t.Label=function(e){var t=e.children,r=e.className,a=e.disabled,l=o.__rest(e,["children","className","disabled"]),s=n.default(r,{"mc-label":!0,"mc-label-disabled":a});return i.createElement("label",o.__assign({className:s},l),t)}});
//# sourceMappingURL=pkg-files-view.min.js-vflfdGY6z.map