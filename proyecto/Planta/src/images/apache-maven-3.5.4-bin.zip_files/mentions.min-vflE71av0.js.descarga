define(["require","exports","tslib","draft-js","spectrum_comments/comment_editor/draft_utils"],function(t,e,n,r,o){"use strict";function i(t){var e=t.blocks,n=e.reduce(function(e,n){var r=e.metadata,o=e.pos,i=n.entityRanges;return{metadata:r.concat(i.filter(function(e){return"mention"===t.entityMap[e.key].type}).map(function(e){var n=t.entityMap[e.key].data;return{type:"mention",user:{type:n.type,identifier:n.identifier},location:{start:o+e.offset,end:o+e.offset+e.length}}})),pos:o+n.text.length}},{metadata:[],pos:0}),r=n.metadata;n.pos;return r}function a(t){return t.reduce(function(t,e){return"mention"===e.type?{mentions:t.mentions.concat([e]),other:t.other}:{mentions:t.mentions,other:t.other.concat([e])}},{mentions:[],other:[]})}function u(t){var e=t.innerProps,n=e.evt,i=e.value,u=a(n.metadata),c=u.mentions;u.other;return r.EditorState.createWithContent(c.reduce(function(t,e){var n=t.createEntity("mention","IMMUTABLE",{identifier:e.user.identifier,type:e.user.type}),i=n.getLastCreatedEntityKey(),a=o.locationToSelection(e.location,n);return r.Modifier.applyEntity(t,a,i)},i.getCurrentContent()))}function c(t){var e=t.innerProps,o=e.evt,u=e.value,c=i(r.convertToRaw(o.getCurrentContent())),s=a(u.metadata).other;return n.__assign({},u,{metadata:s.concat(c)})}function s(){return{draft:{values:d},comment:{values:f}}}Object.defineProperty(e,"__esModule",{value:!0});var d={editorState:{init:u}},f={content:{post:c}};e.mentionReducers=s});
//# sourceMappingURL=mentions.min.js-vflHphWvz.map