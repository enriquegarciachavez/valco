define(["require","exports","tslib","modules/clean/react/file_sidebar/store/file_activity/selectors","modules/clean/react/file_sidebar/store/file_activity/api","modules/clean/react/file_sidebar/file_sidebar_logger"],function(e,t,i,r,n,a){"use strict";function c(e){return{type:"FILE_ACTIVITY|RECEIVE_STREAM_ERROR",error:e}}function u(e,t){return{type:"FILE_ACTIVITY|RECEIVE_FILE_ACTIVITY",activities:e,enabled:t}}function o(e,t){return{type:"FILE_ACTIVITY|LOADING_START",userId:e,file:t}}function f(e){return{type:"FILE_ACTIVITY|LOADING_END",state:e}}function I(){return{type:"FILE_ACTIVITY|RESET"}}function l(){return{type:"FILE_ACTIVITY|RESET_FILE_STATE"}}function d(){return{type:"FILE_ACTIVITY|FEEDBACK_SENT"}}function _(){return{type:"FILE_ACTIVITY|HIDE_FEEDBACK"}}function E(e,t){return(e.file?e.file.file_id:-1)!==(t.file?t.file.file_id:-1)||e.userId!==t.userId}function s(e,i){return function(n,I){if(E({file:i,userId:e},r.getContext(I()))){var d=t.api.create(e);n(l()),n(o(e,i));var _=Date.now(),s=++A,T=i.file_id;return d.getActivityStream(T).then(function(t){var c=t.enabled,o=t.activity_group;a.logGetActivityStreamTiming(Date.now()-_,!0),E({file:i,userId:e},r.getContext(I()))||n(u(o,c))}).catch(function(e){a.logGetActivityStreamTiming(Date.now()-_,!1),s===A&&n(c(e))}).then(function(){s===A&&n(f(r.getState(I())))})}}}function T(e,i,n,a){return function(c,u){var o=u(),f=r.getUserId(o);t.api.create(f).sendFeedback(e,i,n.id,a.id,n.file.ns_id,n.file.sjid),c(d()),setTimeout(function(){c(_())},5e3)}}Object.defineProperty(t,"__esModule",{value:!0}),r=i.__importStar(r);t.api={create:function(e){return new n.FileActivityStreamApi(e)}},t.receiveStreamError=c,t.receiveFileActivity=u,t.loadingStart=o,t.loadingEnd=f,t.reset=I,t.resetFileState=l,t.feedbackSent=d,t.hideFeedback=_;var A=0;t.getActivityStream=s,t.sendFeedback=T});
//# sourceMappingURL=actions.min.js-vflUHVkpQ.map