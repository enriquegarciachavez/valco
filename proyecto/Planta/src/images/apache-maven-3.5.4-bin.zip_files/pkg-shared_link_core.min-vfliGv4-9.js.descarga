define("esignature_prototype/constants",["require","exports","modules/clean/react/previews/constants"],function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ESIGNATURE_SEND_FOR_SIGNATURE_MODE_TOOLBAR_CONFIGURATION=[i.PreviewToolbarButtonType.Sidebar,i.PreviewToolbarButtonType.PageIndicator,i.PreviewToolbarButtonType.ZoomIn,i.PreviewToolbarButtonType.ZoomOut,i.PreviewToolbarButtonType.Fullscreen,i.PreviewToolbarButtonType.Esignature],t.ESIGNATURE_SIGNING_MODE_TOOLBAR_CONFIGURATION=[i.PreviewToolbarButtonType.Sidebar,i.PreviewToolbarButtonType.PageIndicator,i.PreviewToolbarButtonType.ZoomIn,i.PreviewToolbarButtonType.ZoomOut,i.PreviewToolbarButtonType.Fullscreen],t.MIN_FIELD_SIZE=32,t.MIN_DATE_FIELD_WIDTH=158,t.SIGNATURE_HEIGHT=40,t.SIGNATURE_FONT="30px Kristi",t.CURRENT_USER_CREATE_FIELD_COLOR="#ffe28f",t.OTHER_USER_FIELD_COLOR="#e6e8eb",t.CURRENT_USER_VIEW_FIELD_COLOR="#fff3d2",t.FIELD_SELECTOR_OPTIONS=[{value:"Recipient",color:t.OTHER_USER_FIELD_COLOR},{value:"You",color:t.CURRENT_USER_CREATE_FIELD_COLOR}],t.CAN_SIGN_PASS_TEMPLATE="<b>%(user_name)s</b> <newline/> Can sign",t.INTRODUCE_ESIGNATURE_TITLE="Introducing e-signatures",t.INTRODUCE_ESIGNATURE_MESSAGE="Sign and store PDFs securely in Dropbox.",t.ESIGNATURE_CREATE_FIELD_TITLE="Create text, signature, and date fields",t.ESIGNATURE_CREATE_FIELD_MESSAGE="Use these buttons to make fields that you and a recipient can fill out.",t.HAS_SENT_FOR_SIGNATURE="has_sent_for_signature",t.HAS_SEEN_ESIGNATURE_CALLOUT_FROM_PREVIEW="has_seen_esignature_callout_from_preview",t.FIELD_PADDING_TOP=100;(function(e){e[e.Incomplete=1]="Incomplete",e[e.Complete=2]="Complete"})(t.EsignatureStatus||(t.EsignatureStatus={}));(function(e){e[e.Incomplete=0]="Incomplete",e[e.Complete=1]="Complete"})(t.EsignatureDocumentStatus||(t.EsignatureDocumentStatus={}))}),define("esignature_prototype/data/actions",["require","exports","tslib","esignature_prototype/data/types","esignature_prototype/constants","modules/clean/storage"],function(e,t,i,n,r,o){"use strict";function a(e){return{type:n.Actions.CreateSignature,payload:{signatureImage:e}}}function s(e,t){return{type:n.Actions.SignField,payload:{id:e,signatureImage:t}}}function l(e,t,i,r){return{type:n.Actions.EnterFieldText,payload:{id:e,text:t,fontSize:i,rect:r}}}function u(e,t){return{type:n.Actions.SelectFieldDate,payload:{id:e,date:t}}}function d(){return{type:n.Actions.EnterSendForSignatureMode}}function c(e){if(e[".tag"]!==n.FieldType.Date)return e;var t=new window.Date;return i.__assign({},e,{date:null==e.date&&e.isForCurrentUser?{year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()}:e.date})}function p(e,t,i,r){var o=e.map(c);return{type:n.Actions.EnterSigningMode,payload:{fields:o,eSigToken:t,hasAlreadySigned:i,docIsComplete:r}}}function _(e){return{type:n.Actions.EnterFieldCreationMode,payload:{fieldType:e}}}function f(){return{type:n.Actions.ExitFieldCreationMode}}function v(e){return{type:n.Actions.SelectFieldSelectorOption,payload:{option:e}}}function m(e){return{type:n.Actions.CreateField,payload:{field:e}}}function g(e){return{type:n.Actions.CancelField,payload:{fieldId:e}}}function w(e){return{type:n.Actions.UpdateField,payload:{field:e}}}function S(){return o.LocalStorage.set(r.HAS_SEEN_ESIGNATURE_CALLOUT_FROM_PREVIEW,!0),{type:n.Actions.DismissCallout}}function F(){return{type:n.Actions.ShowConfirmationPage}}function E(e){return{type:n.Actions.FocusField,payload:{fieldId:e}}}Object.defineProperty(t,"__esModule",{value:!0}),t.createSignature=a,t.signField=s,t.enterFieldText=l,t.selectFieldDate=u,t.enterSendForSignatureMode=d,t.enterSigningMode=p,t.enterFieldCreationMode=_,t.exitFieldCreationMode=f,t.exitSendForSignature=function(){return{type:n.Actions.ExitSendForSignature}},t.sendForSignature=t.exitSendForSignature,t.selectFieldSelectorOption=v,t.createField=m,t.cancelField=g,t.updateField=w,t.dismissCallout=S,t.showConfirmationPage=F,t.focusField=E}),define("esignature_prototype/data/reducer",["require","exports","tslib","esignature_prototype/data/types","external/lodash"],function(e,t,i,n,r){"use strict";function o(e,t){switch(void 0===e&&(e=a),t.type){case n.Actions.CreateSignature:return i.__assign({},e,{signatureImage:t.payload.signatureImage});case n.Actions.SignField:return i.__assign({},e,{fields:i.__assign({},e.fields,(s={},s[t.payload.id]=i.__assign({},e.fields[t.payload.id],{signatureImage:t.payload.signatureImage}),s))});case n.Actions.EnterFieldText:return i.__assign({},e,{fields:i.__assign({},e.fields,(l={},l[t.payload.id]=i.__assign({},e.fields[t.payload.id],{text:t.payload.text,fontSize:t.payload.fontSize,contentRect:t.payload.rect}),l))});case n.Actions.SelectFieldDate:return i.__assign({},e,{fields:i.__assign({},e.fields,(u={},u[t.payload.id]=i.__assign({},e.fields[t.payload.id],{date:t.payload.date}),u))});case n.Actions.EnterSendForSignatureMode:return i.__assign({},e,{isSendForSignatureMode:!0});case n.Actions.EnterSigningMode:return i.__assign({},e,{isSigningMode:!0,fields:r.keyBy(t.payload.fields,"id"),eSigToken:t.payload.eSigToken,shouldShowEsignatureConfirmationPage:t.payload.hasAlreadySigned&&!t.payload.docIsComplete});case n.Actions.EnterFieldCreationMode:return i.__assign({},e,{isFieldCreationMode:!0,fieldCreationType:t.payload.fieldType});case n.Actions.ExitFieldCreationMode:return i.__assign({},e,{isFieldCreationMode:!1});case n.Actions.ExitSendForSignature:return i.__assign({},a);case n.Actions.SelectFieldSelectorOption:return i.__assign({},e,{isCreatingFieldForRecipient:"Recipient"===t.payload.option.value});case n.Actions.CreateField:return i.__assign({},e,{isFieldCreationMode:!1,unsavedFields:i.__assign({},e.unsavedFields,(d={},d[e.nextFieldId]=i.__assign({},t.payload.field,{id:e.nextFieldId,".tag":e.fieldCreationType,isForCurrentUser:!e.isCreatingFieldForRecipient}),d)),nextFieldId:e.nextFieldId+1});case n.Actions.UpdateField:return i.__assign({},e,{unsavedFields:i.__assign({},e.unsavedFields,(c={},c[t.payload.field.id]=t.payload.field,c))});case n.Actions.CancelField:var o=i.__assign({},e.unsavedFields);return delete o[t.payload.fieldId],i.__assign({},e,{unsavedFields:o});case n.Actions.DismissCallout:return i.__assign({},e,{isCalloutDismissed:!0});case n.Actions.ShowConfirmationPage:return i.__assign({},e,{shouldShowEsignatureConfirmationPage:!0});default:return e;case n.Actions.FocusField:return i.__assign({},e,{fields:i.__assign({},e.fields,(p={},p[t.payload.fieldId]=i.__assign({},e.fields[t.payload.fieldId],{hasBeenFocused:!0}),p)),lastFocusedFieldId:t.payload.fieldId})}var s,l,u,d,c,p}Object.defineProperty(t,"__esModule",{value:!0}),r=i.__importStar(r);var a={fields:{},fieldCreationType:void 0,isCalloutDismissed:!1,isFieldCreationMode:!1,isCreatingFieldForRecipient:!0,isSendForSignatureMode:!1,isSigningMode:!1,nextFieldId:0,eSigToken:"",shouldShowEsignatureConfirmationPage:!1,unsavedFields:{}};t.esignatureReducer=o}),define("esignature_prototype/data/selectors",["require","exports","tslib","modules/clean/redux/selectors","modules/clean/redux/types","esignature_prototype/data/types","esignature_prototype/utils","modules/clean/redux/reselect-utils","external/lodash","external/reselect"],function(e,t,i,n,r,o,a,s,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),l=i.__importStar(l);var d=function(e){return n.getStateAtNamespace(e,r.ESIGNATURE_PROTOTYPE_NAMESPACE_KEY)};t.getSignatureImage=function(e){return d(e).signatureImage},t.getIsSendForSignatureMode=function(e){return d(e).isSendForSignatureMode},t.getIsSigningMode=function(e){return d(e).isSigningMode};var c=function(e){var t=d(e),i=t.fields;return l.values(i).concat(l.values(t.unsavedFields))},p=function(e){return l.pickBy(d(e).fields,function(e,t){return!!e.isForCurrentUser})},_=function(e,t){return l.filter(e,function(e,i){return e.rect.page===t})};t.getFieldsForPage=s.unboundCreateSelector(c,l.nthArg(1),_),t.getIsFieldCreationMode=function(e){return d(e).isFieldCreationMode},t.getFieldCreationType=function(e){return d(e).fieldCreationType},t.getIsCreatingFieldForRecipient=function(e){return d(e).isCreatingFieldForRecipient};var f=function(e){var t=new Date;return l.mapValues(p(e),function(e){var i=e[".tag"];switch(i){case o.FieldType.Signature:return{image:e.signatureImage?e.signatureImage.dataUri:void 0,".tag":i,rect:e.signatureImage?a.placeRectInPdfRect(e.signatureImage.width/e.signatureImage.height,e.rect):void 0};case o.FieldType.Text:return{text:e.text,font_size:e.fontSize,".tag":i,rect:e.contentRect};case o.FieldType.Date:return e.date?{year:e.date.year,month:e.date.month,day:e.date.day,font_size:12,".tag":i}:{year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate(),font_size:12,".tag":i}}})},v=function(e){return d(e).eSigToken};t.getSignArg=function(e){return{esig_token:v(e),field_data:f(e)}},t.getCreateRequestArg=function(e,t){var i=c(e);return{fq_path:t,recipient_emails:[],recipient_message:"",fields_sender:i.filter(function(e){return e.isForCurrentUser}).map(function(e){return{id:e.id,rect:e.rect,".tag":e[".tag"]}}),fields_recipient:i.filter(function(e){return!e.isForCurrentUser}).map(function(e){return{id:e.id,rect:e.rect,".tag":e[".tag"]}})}},t.getIsCalloutDismissed=function(e){return d(e).isCalloutDismissed},t.getShouldShowEsignatureConfirmationPage=function(e){return d(e).shouldShowEsignatureConfirmationPage},t.getNumFieldsPerPage=s.unboundCreateSelector(t.getFieldsForPage,function(e){return e.filter(function(e){return e.isForCurrentUser}).length}),t.getRemainingFieldCount=function(e){return l.filter(p(e),function(e){return!a.isFieldCompleted(e)}).length},t.getFieldsInOrder=u.createSelector(p,function(e){return l.sortBy(e,[function(e){return e.rect.page},function(e){return-1*(e.rect.bottom+e.rect.height)},function(e){return e.rect.left}])}),t.getLastFocusedField=function(e){var i=d(e).fields,n=d(e).lastFocusedFieldId;if(void 0!==n)return i[n];var r=t.getFieldsInOrder(e);return r[r.length-1]},t.getNextUnfilledFieldId=function(e){for(var i=t.getFieldsInOrder(e),n=l.findIndex(i,function(i){return i.id===t.getLastFocusedField(e).id})+1,r=n;r<n+i.length;r++){var o=i[r%i.length];if(!a.isFieldCompleted(o))return o.id}return i[0].id},t.getNextFieldId=function(e){return d(e).nextFieldId},t.getPreviousFieldId=function(e){var i=t.getFieldsInOrder(e);return i[(l.findIndex(i,function(i){return i.id===t.getLastFocusedField(e).id})-1+i.length)%i.length].id},t.getHasUnsavedRecipientFields=function(e){var t=d(e).unsavedFields;return l.some(t,function(e){return!e.isForCurrentUser})},t.getHasUnsavedData=function(e){var t=d(e).unsavedFields,i=p(e);return!l.isEmpty(t)||l.some(i,function(e){return e.isForCurrentUser&&a.isFieldCompleted(e)})},t.getAreAllFieldsCompleted=function(e){return t.getIsSigningMode(e)&&0===t.getRemainingFieldCount(e)}}),define("esignature_prototype/data/types",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});(function(e){e.Signature="signature",e.Text="text",e.Date="date"})(t.FieldType||(t.FieldType={}));(function(e){e.CancelField="Esignature/CancelField",e.CreateField="Esignature/CreateField",e.CreateSignature="Esignature/CreateSignature",e.SignField="Esignature/SignField",e.EnterFieldText="Esignature/EnterFieldText",e.SelectFieldDate="Esignature/SelectFieldDate",e.EnterSendForSignatureMode="Esignature/EnterSendForSignatureMode",e.EnterSigningMode="Esignature/EnterSigningMode",e.EnterFieldCreationMode="Esignature/EnterFieldCreationMode",e.ExitFieldCreationMode="Esignature/ExitFieldCreationMode",e.ExitSendForSignature="Esignature/ExitSendForSignature",e.SendForSignature="Esignature/SendForSignature",e.SelectFieldSelectorOption="Esignature/SelectFieldSelectorOption",e.UpdateField="Esignature/UpdateField",e.DismissCallout="Esignature/DismissCallout",e.ShowConfirmationPage="Esignature/ShowConfirmationPage",e.FocusField="Esignature/FocusField"})(t.Actions||(t.Actions={}))}),define("esignature_prototype/logger/esignature_preview_logger",["require","exports","tslib","modules/clean/uuid","modules/clean/ajax","modules/core/browser","modules/constants/request"],function(e,t,i,n,r,o,a){"use strict";function s(e){return i.__assign({},e,{location:JSON.stringify(e.location)})}function l(e){var t=i.__assign({},e.extra),n=s(t);return{device_type:e.deviceType,file_preview_session_id:e.id,file_viewer_session_id:e.file_viewer_session_id,ns_id:e.ns_id||0,web_request_id:e.web_request_id,extra:JSON.stringify(n)}}function u(e,t){return r.SilentBackgroundBeaconRequest({url:"/log/esignature_preview",data:i.__assign({},l(t),{event_name:e})})}function d(e){var t=e.id,i=void 0===t?n.UUID.v4({allowInsecure:!0}):t,r=e.ns_id,s=void 0===r?0:r,l=e.deviceType,u=void 0===l?o.is_supported_mobile_browser()?v.mobile:o.is_tablet()?v.tablet:v.desktop:l,d=e.web_request_id,c=void 0===d?a.REQUEST_ID:d,p=e.file_viewer_session_id,_=void 0===p?"":p,f=e.file_preview_session_id,m=void 0===f?"":f,g=e.extra;return{id:i,ns_id:s,file_viewer_session_id:_,web_request_id:c,file_preview_session_id:m,deviceType:u,extra:void 0===g?{}:g}}function c(e,t){u(e,t)}function p(e,t,n){return d({ns_id:t.file.ns_id,file_viewer_session_id:t.fileViewerSession.id,file_preview_session_id:t.id,extra:i.__assign({field_id:String(e)},n?{location:n.rect,type:n[".tag"]}:{})})}function _(e,t,i){return function(n){if(t&&"function"==typeof i){u(e,p(n.id,t,n)),i(n)}}}function f(e,t,i){return function(n){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];if(t&&"function"==typeof i){u(e,p(n||-2,t)),i.apply(void 0,[n].concat(r))}}}Object.defineProperty(t,"__esModule",{value:!0}),r=i.__importStar(r),o=i.__importStar(o),a=i.__importStar(a);var v;(function(e){e.desktop="desktop",e.mobile="mobile",e.tablet="tablet"})(v=t.DeviceType||(t.DeviceType={}));(function(e){e.created="created",e.deleted="deleted",e.exited="exited",e.focused="focused",e.filledOut="filled_out",e.modSwitched="mode_switched",e.sent="sent",e.updated="updated"})(t.EventType||(t.EventType={})),t.createSession=d,t.logEvent=c,t.trackFieldAction=_,t.trackFieldIdAction=f}),define("esignature_prototype/utils",["require","exports","tslib","esignature_prototype/constants","esignature_prototype/data/types","modules/clean/file_store/utils","modules/clean/react/size_class/constants","modules/clean/storage","modules/constants/file_viewer"],function(e,t,i,n,r,o,a,s,l){"use strict";function u(){return l.ESIGNATURE}function d(e,t){return u()&&c(e)&&!t}function c(e){return"pdf"===o.getExtension(e)&&u()}function p(e){return d(e)&&!s.LocalStorage.get(n.HAS_SEEN_ESIGNATURE_CALLOUT_FROM_PREVIEW)}function _(){return!s.LocalStorage.get(n.HAS_SENT_FOR_SIGNATURE)}function f(e,t,i,n,o,a){return void 0===a&&(a=-1),{id:a,".tag":r.FieldType.Signature,rect:{left:Math.round(Math.min(e.x,t.x)/n),bottom:Math.round(Math.abs(Math.max(e.y,t.y)-i)/n),width:Math.round(Math.abs(e.x-t.x)/n),height:Math.round(Math.abs(e.y-t.y)/n),page:o}}}function v(e,t,i){return{x:e.rect.left*i,y:Math.abs((e.rect.bottom+e.rect.height)*i-t),width:e.rect.width*i,height:e.rect.height*i}}function m(e,t,n,r,o,a,s){var l=Math.round(s?s/n:e.rect.height),u=Math.round(Math.abs(o-t)/n-l),d=Math.round(r/n);return e.rect=i.__assign({},e.rect,{bottom:u,left:d}),a&&s&&(e.rect=i.__assign({},e.rect,{width:Math.round(a/n),height:Math.round(s/n)})),e}function g(e,t,i){return!(t||i)||e===a.SizeClass.Large}function w(e,t,i){return(t-(e.rect.bottom+e.rect.height))*i-n.FIELD_PADDING_TOP}function S(e){return e.signatureImage||e.text||e.date}function F(e,t){if(e>t.width/t.height){var n=Math.round(t.width/e);return i.__assign({},t,{height:n,bottom:Math.round(t.bottom+(t.height-n)/2)})}var r=Math.round(t.height*e);return i.__assign({},t,{width:r})}Object.defineProperty(t,"__esModule",{value:!0}),t.esignaturesEnabled=u,t.shouldIncludeEsignaturePopoverItem=d,t.canSendForSignature=c,t.shouldShowIntroduceEsignatureCallout=p,t.shouldShowEsignatureCreateFieldCallout=_,t.transformPositionsToField=f,t.transformFieldToCoords=v,t.updateFieldPosition=m,t.shouldShowFileTitle=g,t.calculateScrollTopForField=w,t.isFieldCompleted=S,t.placeRectInPdfRect=F}),define("modules/clean/crypto",["require","exports","tslib","external/sjcl"],function(e,t,i,n){"use strict";function r(e){for(var t=n.random.randomWords(e.length),i=0,r=e.length,o=0<=r;o?i<r:i>r;o?i++:i--)e[i]=t[i];return e}Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importStar(n),t.getRandomValues=r}),define("modules/clean/file_store/actions",["require","exports","tslib","modules/clean/file_store/types","modules/clean/previews/data/api_shims","modules/clean/file_store/utils","external/lodash"],function(e,t,i,n,r,o,a){"use strict";function s(e,t){var i=r.futurizeFile(e);return{type:n.FileNamespaceActions.PutFile,payload:{file:i,fileId:null!=t?t:o.getFileStoreId(e)}}}function l(e){var t=a.map(e,function(e){return r.futurizeFile(e)}),i=a.keyBy(t,o.getFileStoreId);return{type:n.FileNamespaceActions.PutFileMap,payload:i}}Object.defineProperty(t,"__esModule",{value:!0}),a=i.__importStar(a),t.putFile=s,t.putFiles=l}),define("modules/clean/file_store/reducer",["require","exports","tslib","modules/clean/file_store/types"],function(e,t,i,n){"use strict";function r(e,r){switch(void 0===e&&(e=t.defaultFileState),r.type){case n.FileNamespaceActions.PutFile:return i.__assign({},e,(o={},o[r.payload.fileId]=r.payload.file,o));case n.FileNamespaceActions.PutFileMap:return i.__assign({},e,r.payload)}return e;var o}Object.defineProperty(t,"__esModule",{value:!0}),t.defaultFileState={},t.fileNamespaceReducer=r}),define("modules/clean/file_store/selectors",["require","exports","modules/clean/file_store/reducer","modules/clean/redux/types","modules/clean/redux/selectors"],function(e,t,i,n,r){"use strict";function o(e){return r.getStateAtNamespace(e,n.FILE_NAMESPACE_KEY)||i.defaultFileState}function a(e,t){return t?o(e)[t]:void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.getFile=a}),define("modules/clean/file_store/types",["require","exports","modules/clean/react/previews/archive/types","modules/clean/react/browse/model_types","modules/clean/shared_link/types"],function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ArchiveFile=i.File,t.BrowseFile=n.File,t.SharedFile=r.File;(function(e){e.PutFile="PUT_FILE",e.PutFileMap="PUT_FILE_MAP"})(t.FileNamespaceActions||(t.FileNamespaceActions={}))}),define("modules/clean/file_store/utils",["require","exports","tslib","modules/clean/filepath"],function(e,t,i,n){"use strict";function r(e,t){return e.ns_id===t.ns_id&&e.sjid===t.sjid}function o(e){return"fq_path"in e}function a(e){return"subpath"in e}function s(e){return!o(e)&&!a(e)}function l(e){return u(e)}function u(e){return e.ns_id+":"+e.sjid}function d(e){var t="fq_path"in e?e.fq_path:e.filename;return n.file_extension(t)}function c(e){var t=o(e)?e.fq_path:e.filename;return n.filename(t)}function p(e){var t=c(e);return n.filename_without_extension(t)}function _(e){return 0===e.bytes}function f(e){return e.is_symlink&&_(e)}Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importStar(n),t.areFilesEqual=r,t.isBrowseFile=o,t.isArchiveFile=a,t.isSharedFile=s,t.getFileStoreId=l,t.getFileRevisionId=u,t.getExtension=d,t.getFilename=c,t.getFilenameWithoutExtension=p,t.isEmptyFile=_,t.isSymLink=f}),define("modules/clean/open_in_app/actions",["require","exports","tslib","modules/clean/open_in_app/types","modules/clean/open_in_mobile_app"],function(e,t,i,n,r){"use strict";function o(){var e=navigator.userAgent||"",t=e.match(/OS (\d+)_(\d+)_?(\d+)?/);return!t||parseInt(t[1],10)>=9}function a(e,t){var i=t.onAppNeeded,a=t.onAppInstalled;n.areUrlsIOS(e)?r.default.open_ios(e.iOSAppUrl,e.iOSAppStoreUrl,o(),i,a):n.areUrlsAndroid(e)&&r.default.open_android_intent(e.androidAppUrl)}function s(e){var t;if(n.areUrlsIOS(e))t=e.iOSAppUrl;else{if(!n.areUrlsAndroid(e))return;t=e.androidAppUrl}var i=document.createElement("iframe");i.setAttribute("class","open-in-app-transport"),i.setAttribute("src",t),i.setAttribute("style","display: none"),document.body.appendChild(i)}function l(){r.default.cleanup()}Object.defineProperty(t,"__esModule",{value:!0}),r=i.__importDefault(r),t.openInApp=a,t.openImmediately=s,t.cleanUp=l}),define("modules/clean/open_in_app/types",["require","exports","tslib","modules/constants/file_viewer"],function(e,t,i,n){"use strict";function r(e){return e.platform===a.IPAD||e.platform===a.IPHONE}function o(e){return e.platform===a.ANDROID_MARKET}Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importStar(n);var a=n.OpenInMobileAppPlatform;t.areUrlsIOS=r,t.areUrlsAndroid=o}),define("modules/clean/open_in_mobile_app",["require","exports","tslib","jquery","modules/clean/analytics","modules/core/exception","modules/core/i18n"],function(e,t,i,n,r,o,a){"use strict";n=i.__importDefault(n),r=i.__importStar(r);var s=(function(){function e(){}return e.initClass=function(){var e=this;this.vischange_listener=null,this.open_app_mode=!0,this.try_open_ios_9=function(t,i,n,r){return void 0===n&&(n=function(){}),void 0===r&&(r=function(){}),e.vischange_listener||(e.vischange_listener=function(t){return e.open_app_mode=!0,r()},document.addEventListener("visibilitychange",e.vischange_listener)),e.open_app_mode?(e.open_app_mode=!1,e._onOpenLoggingHandler(),n(),window.location=t):(e._onInstallLoggingHandler(),window.location=i)},this.fallback_will_launch=!1,this.try_open=function(t,i,o){if(e._onOpenLoggingHandler(),!e.fallback_will_launch){var a=n.default("body"),s=function(){var e=n.default("<iframe />",{src:t,style:"display: none;"});return a.append(e)},l=!1,u=function(e){return l=!0};document.addEventListener("visibilitychange",u);var d=!1,c=function(e){return d=!0};window.addEventListener("pagehide",c),null!=o&&r.ShareTibEventLogger.log_unauth("CLICK_MOBILE_OPEN","WEB_MOBILE",{scl_url:o}),s();var p=Date.now(),_=function(){if(e.fallback_will_launch=!1,document.removeEventListener("visibilitychange",u),window.removeEventListener("pagehide",c),!d&&!l&&Date.now()<p+4700)return null!=o&&r.ShareTibEventLogger.log_unauth("CLICK_MOBILE_INSTALL","WEB_MOBILE",{scl_url:o}),window.location.replace(i)};return setTimeout(_,3200),e.fallback_will_launch=!0}}},e._onOpenLoggingHandler=function(){},e._onInstallLoggingHandler=function(){},e.registerLoggingHandlers=function(e,t){return this._onOpenLoggingHandler=e,this._onInstallLoggingHandler=t},e.open_on_click=function(e,t,i,r,o,s,l){var u=this;void 0===s&&(s=null);var d=function(i){if(i.preventDefault(),l)return u.open_android_intent(l);if(o){r||(r=n.default("<div/>"));var d=r.text();return u.try_open_ios_9(e,t,function(){return r.text(a._("Install app?"))},function(){return r.text(d)})}return u.try_open(e,t,s)};return n.default(i).on("click",d)},e.open_ios=function(e,t,i,n,r){return void 0===n&&(n=function(){}),void 0===r&&(r=function(){}),i?this.try_open_ios_9(e,t,n,r):this.try_open(e,t)},e.open_android_intent=function(e){return o.assert(e&&e.startsWith("intent://www.dropbox.com/sm/launch_intent_or_fallback_page"),"intentUrl must use intent:// protocol"),this._onOpenLoggingHandler&&this._onOpenLoggingHandler(),window.location.href=e},e.redirect_on_load=function(e,t){return this.try_open(e,t)},e.cleanup=function(){if(this.vischange_listener)return document.removeEventListener("visibilitychange",this.vischange_listener)},e})();return s.initClass(),s}),define("modules/clean/previews/api",["require","exports","tslib","modules/clean/api_v2/client"],function(e,t,i,n){"use strict";function r(e,t){return i.__awaiter(this,void 0,void 0,function(){var r,o;return i.__generator(this,function(i){return r={files:e.map(function(e){return{ns_id:e.ns_id,sj_id:e.sjid}})},o=(new n.ApiV2Client).ns("previews"),[2,o.rpc("get_preview_data_batch",r,{subjectUserId:t?t.id:null})]})})}Object.defineProperty(t,"__esModule",{value:!0}),t.fetchPreviewData=r}),define("modules/clean/previews/data/actions",["require","exports","tslib","external/lodash","modules/clean/previews/data/types","modules/clean/redux/types","modules/clean/previews/data/util","modules/clean/previews/data/api_shims","modules/clean/previews/api","modules/clean/previews/data/util","modules/clean/file_store/utils","modules/constants/file_viewer"],function(e,t,i,n,r,o,a,s,l,u,d,c){"use strict";function p(e){var t={};return e.forEach(function(e){var i=d.getFileRevisionId(e),n=e.preview;n&&(t[i]=n)}),{type:r.ActionTypes.PopulateFiles,payload:t}}function _(e,t){var i=e.revision_id;return{type:r.ActionTypes.OverrideWithComments1Revision,payload:{revisionId:i,preview:t}}}function f(e){var t=e.revision_id;return{type:r.ActionTypes.ClearOverrideWithComments1Revision,payload:{revisionId:t}}}function v(e,t){var i=d.getFileRevisionId(e),n=(o={},o[i]={},o);return t.forEach(function(e){var t=s.extractPreviewFromArchiveFile(e);t&&(n[i][e.subpath]=t)}),{type:r.ActionTypes.PopulateArchiveFiles,payload:n};var o}function m(e,t,n){var o=this;return c.PREVIEW_API?function(r,a){return i.__awaiter(o,void 0,void 0,function(){var o,s,d,c;return i.__generator(this,function(i){switch(i.label){case 0:o=u.filterFilesMissingPreviewData(a(),e,n),s=g(o),r(w(s)),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,l.fetchPreviewData(o,t)];case 2:return d=i.sent(),[2,r(S(d))];case 3:return c=i.sent(),[2,r(F(s))];case 4:return[2]}})})}:function(e,t){return i.__awaiter(o,void 0,void 0,function(){return i.__generator(this,function(e){return[2,{type:r.ActionTypes.UpdatePreviewData,payload:{}}]})})}}function g(e){return e.reduce(function(e,t){return e[d.getFileRevisionId(t)]={data:void 0,status:o.ApiClientStatus.Request},e},{})}function w(e){return{type:r.ActionTypes.UpdatePreviewData,payload:e}}function S(e){return{type:r.ActionTypes.UpdatePreviewData,payload:e.results.reduce(function(e,t){return e[a.buildRevisionId(t.file.ns_id,t.file.sj_id)]={data:t.preview,status:t.err||!t.preview?o.ApiClientStatus.Error:o.ApiClientStatus.Success},e},{})}}function F(e){return{type:r.ActionTypes.UpdatePreviewData,payload:n.mapValues(e,function(e){return{data:void 0,status:o.ApiClientStatus.Error}})}}Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importStar(n),t.populateFilesPreviewData=p,t.overridePreviewForComments=_,t.clearCommentsPreviewOverride=f,t.populateArchivePreviews=v,t.fetchPreviewData=m}),define("modules/clean/previews/data/api_shims",["require","exports","tslib","modules/clean/previews/constants","modules/clean/file_store/utils","modules/core/exception"],function(e,t,i,n,r,o){"use strict";function assert(e,t){e||o.reportException({err:new Error(t),tags:["assert","previews"],severity:o.SEVERITY.NONCRITICAL})}function a(e){return assert(!!e.video_transcode_url,"Preview Data: video_transcode_url missing"),assert(!!e.video_container,"Preview Data: video_container missing"),e.video_transcode_url?{".tag":"video",transcode_url:e.video_transcode_url,container:e.video_container,metadata_url:e.video_metadata_url||void 0,thumb_scrubber_vtt_url:e.video_thumb_scrubber_vtt_url||void 0,poster_url_tmpl:e.thumbnail_url_tmpl||void 0}:{".tag":"restricted",restricted:{".tag":"video"}}}function s(e){return assert(!!e.video_container,"Preview Data: video_container missing for audio"),assert(!!e.preview_url,"Preview Data: preview_url missing for audio"),{container:e.video_container,transcode_url:e.preview_url,waveform_url:e.waveform_url||void 0}}function l(e){return assert(!!e.thumbnail_url_tmpl,"Preview Data: thumbnail_url_tmpl missing"),{thumbnail_url_tmpl:e.preview_url||e.thumbnail_url_tmpl}}function u(e){return i.__assign({},e.linkfile_data)}function d(e){return assert(!!e.htmlified_link,"Preview Data: htmlified_link missing"),{htmlified_link:e.htmlified_link,uses_frame_messenger:g(e.preview_type,r.getExtension(e))}}function c(e){return assert(!!e.preview_ssr_text_url_tmpl,"Preview Data: preview_ssr_text_url_tmpl missing"),assert(!!e.preview_ssr_image_url_tmpl,"Preview Data: preview_ssr_image_url_tmpl missing"),assert(!!e.preview_thumbnail_url,"Preview Data: preview_thumbnail_url missing"),e.preview_ssr_text_url_tmpl?{".tag":"ssr_doc",text_url_tmpl:e.preview_ssr_text_url_tmpl,image_url_tmpl:e.preview_ssr_image_url_tmpl,refresh_url:e.preview_ssr_refresh_url||void 0,placeholder_image_url:e.preview_thumbnail_url}:{".tag":"restricted",restricted:{".tag":"ssr_doc"}}}function p(e){return assert(!!e.preview_url,"Preview Data: preview_url missing"),{exit_url:e.preview_url}}function _(e){switch(e.preview_type){case n.PreviewType.Video:return i.__assign({},a(e));case n.PreviewType.Audio:return i.__assign({".tag":"audio"},s(e));case n.PreviewType.Photo:return i.__assign({".tag":"image"},l(e));case n.PreviewType.Linkfile:return i.__assign({".tag":"linkfile"},u(e));case n.PreviewType.HTML:return{".tag":"raw_html"};case n.PreviewType.Excel:return{".tag":"excel"};case n.PreviewType.Text:return i.__assign({".tag":"html"},d(e));case n.PreviewType.Doc:return i.__assign({},c(e));case n.PreviewType.CloudDoc:return i.__assign({".tag":"cloud_doc"},p(e));case n.PreviewType.Archive:return{".tag":"archive"}}}function f(e,n){if(void 0===n&&(n=!1),e.preview)return e;var r=_(e);if(r&&(t.migratedPreviewTypeWhitelist.includes(r[".tag"])||n)){var o={content:r,direct_blockserver_link:e.direct_blockserver_link||void 0,preview_url:e.preview_url||void 0};return i.__assign({},e,{preview:o})}return e}function v(e){if(e.preview)return e.preview;var t=_(e);return t?{content:t,direct_blockserver_link:e.direct_blockserver_link,preview_url:e.preview_url}:void 0}function m(e){switch(e){case n.PreviewType.Photo:return"image";case n.PreviewType.Doc:return"ssr_doc";case n.PreviewType.Text:return"html";case n.PreviewType.HTML:return"raw_html";default:return e}}function g(e,t){return[n.PreviewType.Excel,n.PreviewType.Text].indexOf(e)>-1&&"epub"!==t}Object.defineProperty(t,"__esModule",{value:!0}),o=i.__importStar(o),t.extractContent=_,t.futurizeFile=f,t.extractPreviewFromArchiveFile=v,t.convertPreviewType=m,t.migratedPreviewTypeWhitelist=["video","image","audio","archive","ssr_doc","linkfile","cloud_doc","excel","html","raw_html","restricted"],t.usesFrameMessenger=g}),define("modules/clean/previews/data/reducer",["require","exports","tslib","external/lodash","modules/clean/previews/data/types","modules/clean/redux/types"],function(e,t,i,n,r,o){"use strict";function a(e,t){switch(void 0===e&&(e=s),t.type){case r.ActionTypes.PopulateFiles:var a=n.mapValues(t.payload,function(e){return{data:e,status:o.ApiClientStatus.Success}});return i.__assign({},e,{filePreviews:i.__assign({},e.filePreviews,a)});case r.ActionTypes.PopulateArchiveFiles:return i.__assign({},e,{archivePreviews:n.merge({},e.archivePreviews,t.payload)});case r.ActionTypes.UpdatePreviewData:return i.__assign({},e,{filePreviews:i.__assign({},e.filePreviews,t.payload)});case r.ActionTypes.OverrideWithComments1Revision:return i.__assign({},e,{comments1Override:i.__assign({},e.comments1Override,(l={},l[t.payload.revisionId]=t.payload.preview,l))});case r.ActionTypes.ClearOverrideWithComments1Revision:return i.__assign({},e,{comments1Override:i.__assign({},e.comments1Override,(u={},u[t.payload.revisionId]=void 0,u))});default:return e}var l,u}Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importStar(n);var s={filePreviews:{},comments1Override:{},archivePreviews:{}};t.reducer=a}),define("modules/clean/previews/data/selectors",["require","exports","modules/clean/redux/types","modules/clean/redux/selectors","modules/clean/file_store/utils","modules/clean/redux/types"],function(e,t,i,n,r,o){"use strict";function a(e){return n.getStateAtNamespace(e,o.PREVIEW_NAMESPACE_KEY)}function s(e,t){var n=a(e);if(n){var o=r.getFileRevisionId(t),s=n.comments1Override[t.revision_id];if(s)return s;var l=n.filePreviews[o];return l&&l.status===i.ApiClientStatus.Success&&l.data?l.data:void 0}}function l(e,t){return t.reduce(function(t,i){return t[r.getFileRevisionId(i)]=s(e,i),t},{})}function u(e,t){var i=a(e);if(i){var n=r.getFileRevisionId(t),o=i.filePreviews[n];return o&&o.status?o:void 0}}function d(e,t){return t.reduce(function(t,i){return t[r.getFileRevisionId(i)]=u(e,i),t},{})}function c(e,t){
var i=n.getStateAtNamespace(e,o.PREVIEW_NAMESPACE_KEY);if(i){var a=i.archivePreviews[r.getFileRevisionId(t)];return a?a[t.subpath]:void 0}}Object.defineProperty(t,"__esModule",{value:!0}),t.getPreviewMetadataForFile=s,t.getPreviewMetadataForFiles=l,t.getApiDataForFile=u,t.getApiDataForFiles=d,t.getPreviewForArchiveFile=c}),define("modules/clean/previews/data/types",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});(function(e){e.PopulateFiles="FileViewer/Previews/PopulateFiles",e.PopulateArchiveFiles="FileViewer/Previews/PopulateArchiveFiles",e.UpdatePreviewData="FileViewer/Previews/UpdatePreviewData",e.OverrideWithComments1Revision="FileViewer/Previews/OverrideWithComments1Revision",e.ClearOverrideWithComments1Revision="FileViewer/Previews/ClearOverrideWithComments1Revision"})(t.ActionTypes||(t.ActionTypes={}))}),define("modules/clean/previews/data/util",["require","exports","tslib","external/lodash","modules/clean/previews/data/selectors","modules/clean/file_store/utils","modules/clean/redux/types"],function(e,t,i,n,r,o,a){"use strict";function s(e,t,i){if(void 0===i&&(i=!1),i)return t;var s=r.getApiDataForFiles(e,t);return n.filter(t,function(e){var t=o.getFileRevisionId(e);return!s[t]||!s[t].data&&s[t].status===a.ApiClientStatus.Error})}function l(e,t){return e+":"+t}function u(e,t){var i=r.getApiDataForFile(e,t);return!(!i||!i.data||i.status===a.ApiClientStatus.Error)}function d(e,t){return c(e,t)===a.ApiClientStatus.Request}function c(e,t){var i=r.getApiDataForFile(e,t);return i?i.status:void 0}Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importStar(n),t.filterFilesMissingPreviewData=s,t.buildRevisionId=l,t.previewDataPresentForFile=u,t.previewDataInFlight=d,t.previewDataStatus=c}),define("modules/clean/previews/path_context_utils",["require","exports","tslib","modules/clean/previews/constants","modules/core/browser"],function(e,t,i,n,r){"use strict";function o(){var e=r.get_uri().path;return/^\/(home|work|personal|search)/.test(e)?n.PathContext.Browse:/^\/(s|scl\/fi)\//.test(e)?n.PathContext.SharedLinkFile:/^\/(sh|scl\/fo)\//.test(e)?n.PathContext.SharedLinkFolder:/^\/sc\//.test(e)?n.PathContext.SharedLinkCollection:/^\/history/.test(e)?n.PathContext.VersionHistory:void 0}Object.defineProperty(t,"__esModule",{value:!0}),r=i.__importStar(r),t.determinePathContext=o}),define("modules/clean/previews/responsive_utils",["require","exports","modules/clean/previews/constants","modules/clean/previews/path_context_utils"],function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isResponsiveEnabled=function(){return n.determinePathContext()!==i.PathContext.VersionHistory}}),define("modules/clean/react/browse/model_types",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),define("modules/clean/react/file_viewer/app_download_interstitial/app_download_interstitial",["require","exports","tslib","external/classnames","external/react","spectrum/button","spectrum/file_icon","spectrum/icon_content","spectrum/icon_form","modules/clean/open_in_app/types","modules/clean/static_urls","modules/core/i18n","modules/clean/react/css"],function(e,t,i,n,r,o,a,s,l,u,d,c,p){"use strict";function _(e){var t=e.onClose;return r.createElement("header",null,r.createElement("h1",{className:"DropboxLogo"},r.createElement("img",{src:d.static_url("/static/images/index/rebrand/logos/glyphs/glyph_blue-vfla3iXuq.svg"),className:"DropboxLogo--glyph",alt:"Dropbox"}),r.createElement("img",{src:d.static_url("/static/images/index/rebrand/logos/wordmarks/wordmark_black-vflmhE3RY.svg"),className:"Dropbox--wordmark",alt:"Dropbox"})),r.createElement("button",{className:"button-as-link app-download-interstitial-close","aria-label":"Close",onClick:t},r.createElement(l.IconForm,{name:"cancel"})))}function f(e){var t=e.appUrl,i=e.onContinue,n=e.onAppDownload;return r.createElement("div",{className:"app-download-interstitial-ctas"},r.createElement(o.Button,{className:"app-download-interstitial-cta",size:"large",href:t,onClick:n},c._("Get the app")),r.createElement(o.Button,{className:"app-download-interstitial-cta",size:"large",variant:"secondary",onClick:i},c._("Or continue to website")))}function v(e,t){return e&&t?c._("%(owner)s (%(team)s) shared this with you.").format({owner:e,team:t}):e&&!t?c._("%(owner)s shared this with you.").format({owner:e}):!e&&t?c._("%(team)s shared this with you.").format({team:t}):c._("This file was shared with you.")}function m(e){var t=e.fileOrFolderName,i=e.isFolder,n=e.ownerName,o=e.ownerTeamName;return r.createElement("section",{className:"app-download-interstitial-content"},r.createElement("header",null,r.createElement("h2",null,c._("Get a better view with our mobile app"))),r.createElement("div",{className:"app-download-interstitial-content-thumbnail"},i?r.createElement(s.IconContent,{name:"folder_shared-large"}):r.createElement(a.FileIcon,{path:t,variant:"large"}),r.createElement("p",{className:"app-download-interstitial-filename"},t),r.createElement("p",{className:"app-download-interstitial-owner"},v(n,o))))}function g(e){if(e){if(u.areUrlsIOS(e))return e.iOSAppStoreUrl;if(u.areUrlsAndroid(e))return e.androidAppUrl}}Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importDefault(n),r=i.__importStar(r);var w=function(e){var t=e.className,i=e.open_in_app_data,o=e.fileOrFolderName,a=e.isFolder,s=e.onClose,l=e.onContinue,u=e.onAppDownload,d=e.ownerName,c=e.ownerTeamName;return r.createElement("section",{className:n.default("app-download-interstitial-container",t)},r.createElement(_,{onClose:s}),r.createElement(m,{isFolder:a,fileOrFolderName:o,ownerName:d,ownerTeamName:c}),r.createElement(f,{onContinue:l,onAppDownload:u,appUrl:g(i)}))},S=p.requireCssWithComponent(w,["/static/css/index/obsidian/logo-vflM1D8V1.css","/static/css/file_viewer/app_download_interstitial-vfllUPOgM.css"]);t.AppDownloadInterstitial=S}),define("modules/clean/react/file_viewer/constants",["require","exports","modules/clean/react/size_class/constants","modules/clean/previews/constants"],function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});(function(e){e.Setup="SETUP",e.Cleanup="CLEANUP",e.UpdateFiles="UPDATE_FILES",e.FlipNext="FLIP_NEXT",e.FlipPrevious="FLIP_PREVIOUS",e.OpenFullscreen="OPEN_FULLSCREEN",e.CloseFullscreen="CLOSE_FULLSCREEN",e.SwitchRevision="SWITCH_REVISION",e.RestoreRevision="RESTORE_REVISION",e.SaveForwardRevision="SAVE_FORWARD_REVISION",e.BroadcastRenderStatus="BROADCAST_RENDER_STATUS",e.HideOpenInAppBanner="HIDE_OPEN_IN_APP_BANNER",e.ClosePreviewQualityPopup="CLOSE_PREVIEW_QUALITY_POPUP"})(t.ActionType||(t.ActionType={}));(function(e){e[e.Unknown=0]="Unknown",e[e.Succeeded=1]="Succeeded"})(t.PreviewRenderStatus||(t.PreviewRenderStatus={}));(function(e){e.FileViewerOpened="FILE_VIEWER_OPENED",e.FilePreviewSessionEnded="FILE_PREVIEW_SESSION_ENDED",e.FilePreviewAttemptStarted="FILE_PREVIEW_ATTEMPT_STARTED",e.FilePreviewSupportConfirmed="FILE_PREVIEW_SUPPORT_CONFIRMED",e.FilePreviewSupportDenied="FILE_PREVIEW_SUPPORT_DENIED",e.FilePreviewDownloadAttempted="FILE_PREVIEW_DOWNLOAD_ATTEMPTED",e.FilePreviewDownloadSucceeded="FILE_PREVIEW_DOWNLOAD_SUCCEEDED",e.FilePreviewDownloadFailed="FILE_PREVIEW_DOWNLOAD_FAILED",e.FilePreviewRenderSucceeded="FILE_PREVIEW_RENDER_SUCCEEDED",e.FilePreviewRenderFailed="FILE_PREVIEW_RENDER_FAILED",e.FilePreviewPASSShown="FILE_PREVIEW_PASS_SHOWN",e.FilePreviewPASSHover="FILE_PREVIEW_PASS_HOVER",e.FilePreviewPASSClick="FILE_PREVIEW_PASS_CLICK",e.BrowsePASSShown="BROWSE_PASS_SHOWN",e.BrowsePASSHover="BROWSE_PASS_HOVER",e.BrowsePASSClick="BROWSE_PASS_CLICK",e.FilePreviewQualityPopupAsked="FILE_PREVIEW_QUALITY_POPUP_ASKED",e.FilePreviewQualityPopupAnswered="FILE_PREVIEW_QUALITY_POPUP_ANSWERED",e.FilePreviewQualityPopupDismissed="FILE_PREVIEW_QUALITY_POPUP_DISMISSED",e.FilePreviewUserAction="FILE_PREVIEW_USER_ACTION",e.FilePreviewVideoStalled="FILE_PREVIEW_VIDEO_STALLED",e.FilePreviewVideoToggled="FILE_PREVIEW_VIDEO_TOGGLED",e.FilePreviewVideoTruncated="FILE_PREVIEW_VIDEO_TRUNCATED",e.ArchivePreviewContentsScanned="ARCHIVE_PREVIEW_CONTENTS_SCANNED"})(t.EventType||(t.EventType={}));(function(e){e.ExcelHTML="test-workbook.html"})(t.CannedTestFilename||(t.CannedTestFilename={}));(function(e){e[e.Frame=0]="Frame",e[e.Window=1]="Window"})(t.FileViewerInterfaceType||(t.FileViewerInterfaceType={}));(function(e){e[e.TitleBar=0]="TitleBar",e[e.PreviewContent=1]="PreviewContent",e[e.Sidebar=2]="Sidebar"})(t.FileViewerPane||(t.FileViewerPane={}));(function(e){e.AppDownloadInterstitialClose="app_download_interstitial_close",e.AppDownloadInterstitialContinue="app_download_interstitial_continue",e.AppDownloadInterstitialInstall="app_download_interstitial_install",e.AppDownloadInterstitialView="app_download_interstitial_view",e.ArchiveNavigation="archive_navigation",e.CopyToPaper="copy_to_paper",e.Share="share",e.Download="download",e.SaveToDropbox="save_to_dropbox",e.SaveToDropboxPersonal="save_to_dropbox_personal",e.SaveToDropboxWork="save_to_dropbox_work",e.OpenInApp="open_in_app",e.OpenInOfficeOnline="open_in_office_online",e.OpenInUnity="open_in_unity",e.OpenInUnityFolder="open_in_unity_folder",e.PageChange="page_change",e.RemoveLink="remove_link",e.ViewRevisions="view_revisions",e.ClickDropboxLogo="click_dropbox_logo",e.ClickCustomLogo="click_custom_logo",e.ToggleCommentsOn="toggle_comments_on",e.ToggleCommentsOff="toggle_comments_off",e.SignIn="sign_in",e.ClickNotifications="click_notifications",e.ClickAccountMenu="click_account_menu",e.ToggleFullscreenOn="toggle_fullscreen_on",e.ToggleFullscreenOff="toggle_fullscreen_off",e.ToggleSidebarOn="toggle_sidebar_on",e.ToggleSidebarOff="toggle_sidebar_off",e.Print="print",e.InlineSearch="inline_search",e.FlipNext="flip_next",e.FlipPrevious="flip_prev",e.ZoomIn="zoom_in",e.ZoomOut="zoom_out",e.VideoPlaybackRateChanged="playback_rate_changed"})(t.UserAction||(t.UserAction={}));(function(e){e.AppDownloadInterstitial="app_download_interstitial",e.TitleBarMain="title_bar_main",e.TitleBarSplitButton="title_bar_open_split_button",e.TitleBarMore="title_bar_more",e.PreviewContentMain="preview_content_main",e.PreviewContentSplitButton="preview_content_open_split_button",e.Toolbar="toolbar",e.VideoPlayer="video_player",e.OpenInAppBanner="open_in_app_banner",e.LightboxFrame="lightbox_frame",e.LightboxToolbar="lightbox_toolbar",e.LightboxCloseButton="lightbox_close_button",e.Sidebar="sidebar",e.Keyboard="keyboard",e.Browser="browser",e.Unknown="unknown"})(t.UserActionContext||(t.UserActionContext={}));(function(e){e[e.Main=0]="Main",e[e.Split=1]="Split"})(t.SplitButtonActionLocation||(t.SplitButtonActionLocation={}));t.SizeClassFilenameLengthMap=(r={},r[i.SizeClass.Small]=12,r[i.SizeClass.Medium]=25,r[i.SizeClass.Large]=35,r),t.ResponsiveClassName="responsive-enabled",t.PathContext=n.PathContext,t.SubpathQueryKey="file_subpath",t.PageQueryKey="page",t.UnsupportedExtensionHelpLink="https://www.dropbox.com/help/files-folders/file-types-that-preview";(function(e){e.default="default",e.html="html",e.pdf="pdf",e.ppt="ppt",e.spreadsheet="spreadsheet"})(t.DocType||(t.DocType={}));var r}),define("modules/clean/react/file_viewer/data/actions",["require","exports","tslib","modules/clean/ajax","modules/clean/react/file_viewer/constants","modules/clean/file_store/actions","modules/clean/previews/data/actions","modules/clean/react/file_viewer/logging","modules/clean/react/file_viewer/data/selectors","modules/clean/file_store/utils","modules/clean/react/file_viewer/data/types","modules/clean/previews/data/util","modules/clean/react/file_viewer/constants","modules/clean/downloads","modules/core/uri","modules/core/browser"],function(e,t,i,n,r,o,a,s,l,u,d,c,p,_,f,v){"use strict";function m(e,t){return void 0===e&&(e=r.DocType.default),function(i){i({type:d.Actions.OpenSidebar,payload:{type:e}}),s.logUserAction(r.UserAction.ToggleSidebarOn,t)}}function g(e,t){return void 0===e&&(e=r.DocType.default),function(i){i({type:d.Actions.CloseSidebar,payload:{type:e}}),s.logUserAction(r.UserAction.ToggleSidebarOff,t)}}function w(){return{type:d.Actions.DismissAppDownloadInterstitial}}function S(e){return{type:d.Actions.OpenFile,payload:{fileId:e}}}function F(){return{type:d.Actions.CloseFile}}function E(e){var t=this;return function(n,r){return i.__awaiter(t,void 0,void 0,function(){var t,s,l;return i.__generator(this,function(i){return t=u.getFileStoreId(e),s=!c.previewDataPresentForFile(r(),e)&&!c.previewDataInFlight(r(),e),l=o.putFile(e),n(l),n(a.populateFilesPreviewData([l.payload.file])),s&&n(a.fetchPreviewData([l.payload.file])),n(S(t)),[2]})})}}function h(e,t){return{type:d.Actions.UpdateRenderStatus,payload:{fileId:e,renderStatus:t}}}function y(){return function(e,t){var i=l.getCurrentFileId(t());i&&e(h(i,p.PreviewRenderStatus.Succeeded))}}function P(e){return{type:d.Actions.SetShowOverQuotaUpsell,payload:e}}function I(e){return function(t,i){e&&void 0===l.getShowOverQuotaUpsell(i())&&n.SilentBackgroundRequest({url:"/should_show_file_preview_upsell",data:{_subject_uid:e.id},success:function(e){try{var i=JSON.parse(e);i&&t(P(i.shouldShowFilePreviewUpsell))}catch(e){}}})}}function A(e){return function(t){e.preview&&t(a.overridePreviewForComments(e,e.preview)),t({type:d.Actions.SwitchRevision,payload:{file:e}})}}function C(){return function(e,t){var i=l.getActiveFile(t());i&&e(a.clearCommentsPreviewOverride(i)),e({type:d.Actions.RestoreRevision})}}function b(e){return function(t){t(o.putFile(e,e.revision_id)),e.preview&&t(a.overridePreviewForComments(e,e.preview)),t({type:d.Actions.SaveForwardRevision,payload:{revisionKey:e.revision_id}})}}function T(e){var t=f.URI.parse(e.direct_blockserver_link);t.updateQuery({dl:"1"}),_.get({url:t.toString(),__do_not_use_expected_domain:"dl.dropboxusercontent.com"})}function R(){v.reload(!0)}function O(){return function(e){e({type:d.Actions.PlayMedia})}}function x(){return function(e){e({type:d.Actions.PauseMedia})}}function D(){return function(e){e({type:d.Actions.ResetStore})}}function M(){return function(e){e({type:d.Actions.DisableRegionCreation})}}function L(){return function(e){e({type:d.Actions.EnableRegionCreation})}}Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importStar(n),_=i.__importStar(_),v=i.__importStar(v),t.openFullScreen=function(){return{type:d.Actions.OpenFullScreen}},t.closeFullScreen=function(){return{type:d.Actions.CloseFullScreen}},t.openSidebar=m,t.closeSidebar=g,t.dismissAppDownloadInterstitial=w,t.openFileById=S,t.closeFile=F,t.openFile=E,t.setRenderStatusSuccessForCurrentFile=y,t.fetchShowOverQuotaUpsell=I,t.switchRevisionAction=A,t.restoreRevisionAction=C,t.saveForwardRevision=b,t.download=T,t.pendingFileUploaded=R,t.setMediaPlaying=O,t.setMediaPaused=x,t.resetFileViewerStore=D,t.disableRegionCreation=M,t.enableRegionCreation=L}),define("modules/clean/react/file_viewer/data/reducer",["require","exports","tslib","modules/clean/react/file_viewer/data/types","modules/clean/react/file_viewer/constants"],function(e,t,i,n,r){"use strict";function o(e,r){void 0===e&&(e=t.defaultState);var o=r.payload;switch(r.type){case n.Actions.CloseFile:return i.__assign({},e,{currentFileId:void 0,fileRevision:void 0,latestFileId:void 0});case n.Actions.OpenFile:return i.__assign({},e,{currentFileId:o.fileId,fileRevision:void 0,latestFileId:void 0});case n.Actions.SwitchRevision:return i.__assign({},e,{fileRevision:o.file});case n.Actions.RestoreRevision:return i.__assign({},e,{fileRevision:void 0,currentFileId:e.latestFileId||e.currentFileId,latestFileId:void 0});case n.Actions.SaveForwardRevision:return i.__assign({},e,{latestFileId:o.revisionKey});case n.Actions.OpenFullScreen:return i.__assign({},e,{isFullScreen:!0});case n.Actions.CloseFullScreen:return i.__assign({},e,{isFullScreen:!1});case n.Actions.OpenSidebar:return i.__assign({},e,{isSidebarOpen:i.__assign({},e.isSidebarOpen,(a={},a[o.type]=!0,a))});case n.Actions.CloseSidebar:return i.__assign({},e,{isSidebarOpen:i.__assign({},e.isSidebarOpen,(s={},s[o.type]=!1,s))});case n.Actions.DismissAppDownloadInterstitial:return i.__assign({},e,{appDownloadInterstitialDismissed:!0});case n.Actions.SetShowOverQuotaUpsell:return i.__assign({},e,{showOverQuotaUpsell:o});case n.Actions.UpdateRenderStatus:return i.__assign({},e,{renderStatuses:i.__assign({},e.renderStatuses,(l={},l[o.fileId]=o.renderStatus,l))});case n.Actions.PlayMedia:return i.__assign({},e,{isMediaPlaying:!0});case n.Actions.PauseMedia:return i.__assign({},e,{isMediaPlaying:!1,pauseCount:e.pauseCount?e.pauseCount+1:1});case n.Actions.ResetStore:return t.defaultState;case n.Actions.EnableRegionCreation:return i.__assign({},e,{isAnnotationRegionEnabled:!0});case n.Actions.DisableRegionCreation:return i.__assign({},e,{isAnnotationRegionEnabled:!1});default:return e}var a,s,l}Object.defineProperty(t,"__esModule",{value:!0}),t.defaultState={currentFileId:void 0,fileRevision:void 0,latestFileId:void 0,isFullScreen:!1,isSidebarOpen:(a={},a[r.DocType.ppt]=!0,a[r.DocType.pdf]=!1,a),renderStatuses:{},showOverQuotaUpsell:void 0},t.fileViewerReducer=o;var a}),define("modules/clean/react/file_viewer/data/selectors",["require","exports","tslib","modules/clean/redux/types","modules/clean/redux/selectors","modules/clean/file_store/selectors","external/reselect","external/lodash","modules/clean/previews/constants"],function(e,t,i,n,r,o,a,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s=i.__importStar(s);var u=function(e){return r.getStateAtNamespace(e,n.FILE_VIEWER_NAMESPACE_KEY)};t.getIsFullScreen=function(e){return u(e).isFullScreen},t.getIsSidebarOpen=function(e){return u(e).isSidebarOpen},t.getAppDownloadInterstitial=function(e){return u(e).appDownloadInterstitialDismissed},t.getCurrentFileId=function(e){return u(e).currentFileId},t.getCurrentFile=a.createSelector(s.nthArg(0),t.getCurrentFileId,o.getFile),t.getPastFile=function(e){return u(e).fileRevision},t.getActiveFile=function(e){return t.getPastFile(e)||t.getCurrentFile(e)},t.getShowOverQuotaUpsell=function(e){return u(e).showOverQuotaUpsell};var d=function(e,t){return u(e).renderStatuses[t]};t.getRenderStatusForCurrentFile=function(e){var i=t.getCurrentFileId(e);if(i)return d(e,i)},t.getIsMediaPlaying=function(e){return u(e).isMediaPlaying},t.getPauseCount=function(e){var t=u(e).pauseCount;return t?t:0},t.getIsFlippingEnabled=function(e){return!(t.getIsMediaPlaying(e)||t.getIsFullScreen(e)&&s.get(t.getCurrentFile(e),"preview_type")===l.PreviewType.Doc)},t.getIsAnnotationRegionEnabled=function(e){return u(e).isAnnotationRegionEnabled}}),define("modules/clean/react/file_viewer/data/store",["require","exports","tslib","esignature_prototype/data/reducer","external/lodash","modules/clean/redux/store","modules/clean/redux/types","modules/clean/file_store/reducer","modules/clean/react/file_viewer/data/reducer","modules/clean/previews/data/reducer","modules/clean/previews/data/api_shims","modules/clean/previews/data/actions","modules/clean/file_store/actions","modules/clean/react/file_viewer/data/actions"],function(e,t,i,n,r,o,a,s,l,u,d,c,p,_){"use strict";function f(e,t){var i=t.file;i&&e.dispatch(_.openFile(i))}function v(e,t){var i=r.map(t,function(e){return d.futurizeFile(e)});e.dispatch(c.populateFilesPreviewData(i)),e.dispatch(p.putFiles(i))}function m(e,t){e.dispatch(p.putFiles(t))}Object.defineProperty(t,"__esModule",{value:!0}),r=i.__importStar(r),t.fileViewerReducerMap=(g={},g[a.ESIGNATURE_PROTOTYPE_NAMESPACE_KEY]=n.esignatureReducer,g[a.FILE_NAMESPACE_KEY]=s.fileNamespaceReducer,g[a.FILE_VIEWER_NAMESPACE_KEY]=l.fileViewerReducer,g[a.PREVIEW_NAMESPACE_KEY]=u.reducer,g),t.getStoreForFileViewer=r.once(function(){return o.getStoreAndRegisterReducers(t.fileViewerReducerMap)}),t.hydrateFileViewerNamespace=f,t.hydrateFileStore=v,t.updateFileStore=m;var g}),define("modules/clean/react/file_viewer/data/types",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});(function(e){e.CloseFile="FileViewer/CloseFile",e.CloseFullScreen="FileViewer/CloseFullScreen",e.CloseSidebar="FileViewer/CloseSidebar",e.DisableRegionCreation="FileViewer/DisableRegionCreation",e.DismissAppDownloadInterstitial="FileViewer/DismissAppDownloadInterstitial",e.EnableRegionCreation="FileViewer/EnableRegionCreation",e.OpenFile="FileViewer/OpenFile",e.OpenFullScreen="FileViewer/OpenFullScreen",e.OpenSidebar="FileViewer/OpenSidebar",e.PauseMedia="FileViewer/PauseMedia",e.PlayMedia="FileViewer/PlayMedia",e.ResetStore="FileViewer/ResetStore",e.RestoreRevision="FileViewer/RestoreRevision",e.SaveForwardRevision="FileViewer/SaveForwardRevision",e.SetShowOverQuotaUpsell="FileViewer/SetShowOverQuotaUpsell",e.SwitchRevision="FileViewer/SwitchRevision",e.UpdateRenderStatus="FileViewer/UpdateRenderStatus"})(t.Actions||(t.Actions={}))}),define("modules/clean/react/file_viewer/file_preview_event_emitter",["require","exports","tslib","external/eventemitter3"],function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importDefault(n),t.filePreviewEventEmitter=new n.default}),define("modules/clean/react/file_viewer/location_utils",["require","exports","tslib","modules/clean/react/file_viewer/constants","modules/clean/history","modules/core/exception"],function(e,t,i,n,r,o){"use strict";function a(e){return e?e.query.preview:""}function s(e,t){return e?e+"/"+t:"/"+t}function l(e,t){if(e&&!(t<=0))return e.split("/").slice(0,t+1).join("/")}function u(e,t){if(e){if(t<=0)return e;return l(e,e.split("/").length-t-1)}}function d(e){p(c(n.SubpathQueryKey,e))}function c(e,t){var i=r.default.get_uri();return t?i.updateQuery(e,t):i.removeQuery(e),i}function p(e){r.default.push_state(e.getPath(),e.getQuery())}function _(e){var t,i=e.query[n.SubpathQueryKey];return t=i instanceof Array?i.length?i[0]:void 0:i,t&&0!==t.indexOf("/")?void o.reportStack("path malformed",{severity:o.SEVERITY.NONCRITICAL,exc_extra:{fileSubpath:t}}):t}function f(e){var t=e.query[n.PageQueryKey];if(t){var i=+t;return i?i:void 0}}function v(e){e?e>0&&p(c(n.PageQueryKey,e.toString())):p(c(n.PageQueryKey,null))}Object.defineProperty(t,"__esModule",{value:!0}),r=i.__importDefault(r),o=i.__importStar(o),t.getFilenameFromLocation=a,t.addToFileSubpath=s,t.truncateFileSubpath=l,t.shortenFileSubpathBy=u,t.updateFileSubpathQuery=d,t.getFileSubpath=_,t.getPageQuery=f,t.updatePageQuery=v}),define("modules/clean/react/file_viewer/logging",["require","exports","modules/clean/react/file_viewer/models","modules/clean/react/file_viewer/file_preview_event_emitter","modules/clean/react/file_viewer/constants"],function(e,t,i,n,r){"use strict";function o(e,t,o){void 0===o&&(o={}),null!=i.FilePreviewSession.currentSession&&n.filePreviewEventEmitter.emit(r.EventType.FilePreviewUserAction,i.FilePreviewSession.currentSession,e,t,o)}Object.defineProperty(t,"__esModule",{value:!0}),t.logUserAction=o}),define("modules/clean/react/file_viewer/models",["require","exports","tslib","modules/clean/react/file_viewer/constants","modules/clean/react/file_viewer/file_preview_event_emitter","modules/clean/react/previews/constants","modules/clean/uuid","modules/clean/web_timing_logger","modules/core/browser","modules/core/exception","external/lodash"],function(e,t,i,n,r,o,a,s,l,u,d){"use strict";function c(){var e=d.difference(Object.keys(p),d.values(p));return e.push(n.EventType.FilePreviewSessionEnded),e}Object.defineProperty(t,"__esModule",{value:!0}),l=i.__importStar(l),u=i.__importStar(u);var p={};p[n.EventType.FilePreviewAttemptStarted]=null,p[n.EventType.FilePreviewSupportConfirmed]=n.EventType.FilePreviewAttemptStarted,p[n.EventType.FilePreviewSupportDenied]=n.EventType.FilePreviewAttemptStarted,p[n.EventType.FilePreviewDownloadAttempted]=n.EventType.FilePreviewSupportConfirmed,p[n.EventType.FilePreviewDownloadSucceeded]=n.EventType.FilePreviewDownloadAttempted,p[n.EventType.FilePreviewDownloadFailed]=n.EventType.FilePreviewDownloadAttempted,p[n.EventType.FilePreviewRenderSucceeded]=n.EventType.FilePreviewDownloadSucceeded,p[n.EventType.FilePreviewRenderFailed]=n.EventType.FilePreviewDownloadSucceeded;var _=(function(){function e(e,t){this.id=e||a.UUID.v4({allowInsecure:!0}),this.imagesFetched=t||{},this.deviceType=this._deviceTypeString()}return e.prototype._deviceTypeString=function(){return l.is_supported_mobile_browser()?"mobile":l.is_tablet()?"tablet":"desktop"},e.currentSession=null,e})();t.FileViewerSession=_;var f=(function(){function e(e){var t=e.id,i=e.fileViewerSession,n=e.file,r=e.sourceContext,o=e.sourceAction,s=e.isMounted;this.ssrTiming={},this.ssrTimestamps={},u.assert(!!i,"FileViewerSession required"),u.assert(!!n,"File required"),this.id=t||a.UUID.v4({allowInsecure:!0}),this.fileViewerSession=i,this.file=n,this.sourceContext=r,this.sourceAction=o,this.previewTimeline={},this.lastEvent=null,this.pagesRendered={},this.zoomScales=[],this.passwordNeeded=!1,this.isMounted=s}return e.prototype.recordEvent=function(e,t){if(void 0===t&&(t={}),!(t instanceof Object))throw new Error("extra param of recordEvent should be an object.");this.isEventInTimeline(e)||p.hasOwnProperty(e)&&this.lastEvent!==p[e]||(this.addToTimeline(e),r.filePreviewEventEmitter.emit(e,this,t),this.lastEvent=e)},e.prototype.markPrimaryEvent=function(){var e;e=window._timingData&&window._timingData.tti?window._timingData.tti.getTime():l.now(),this.primaryMarkTs||(this.primaryMarkTs=e)},e.prototype.timeToPrimaryMark=function(){return this.timeToMark(this.primaryMarkTs)},e.prototype.logSSREvent=function(e){void 0===this.ssrTimestamps[e]&&(this.ssrTimestamps[e]=l.now())},e.prototype.timeToMark=function(e){if(void 0!==e)switch(this.sourceAction){default:return;case o.PreviewSourceAction.Visit:var t=s.start_time();if(void 0!==t)return e-t;return;case o.PreviewSourceAction.Click:var i=this.previewTimeline[n.EventType.FilePreviewAttemptStarted];if(!i)return;var r=i.timestamp;if(void 0===r)return;return e-r}},e.prototype.isEventInTimeline=function(e){return e in this.previewTimeline},e.prototype.addToTimeline=function(e){this.previewTimeline[e]={timestamp:l.now()}},e.currentSession=null,e})();t.FilePreviewSession=f,t.FilePreviewSessionEndEvents=c()}),define("modules/clean/react/file_viewer/url_utils",["require","exports","tslib","modules/clean/history","modules/core/browser"],function(e,t,i,n,r){"use strict";function o(e){return function(t){t.ctrlKey||t.metaKey||e(t)}}function a(){var e=r.get_uri();return e.removeQuery("preview"),e}function s(){c("preview")}function l(e){d("preview",e.filename)}function u(e){n.default.push_state(e.getPath(),e.getQuery())}function d(e,t){var i={};i[e]=t;var r=n.default.get_uri();r.updateQuery(i),u(r)}function c(e){var t=n.default.get_uri();t.removeQuery(e),u(t)}Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importDefault(n),r=i.__importStar(r),t.linkClickHandler=o,t.getCurrentFolderHref=a,t.closeFile=s,t.openFile=l}),define("modules/clean/react/location/types",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(function(){function e(e,t){void 0===t&&(t={}),this.path=e,this.query=t}return e.fromURI=function(t){return new e(t.getPath(),t.getQuery())},e})();t.Location=i}),define("modules/clean/react/location/with_location",["require","exports","tslib","external/react","modules/clean/react/location/types","modules/clean/react/size_class/utils","modules/core/browser","modules/clean/history"],function(e,t,i,n,r,o,a,s){"use strict";function l(e,t){return void 0===t&&(t=u),l=(function(o){function l(e){var i=o.call(this,e)||this;i.onLocationChange=function(e,n){i.setState(t(new r.Location(i.basePathComponent+"/"+decodeURIComponent(e),n),i.props))};var n=a.get_uri(),s=n.getPath();return i.basePathComponent="/"+s.split("/")[1],i.state=t(r.Location.fromURI(n),e),i}return i.__extends(l,o),l.prototype.componentDidMount=function(){s.default.add_callback(this.basePathComponent,this.onLocationChange,!0)},l.prototype.componentWillUnmount=function(){s.default.remove_callback(this.basePathComponent,this.onLocationChange)},l.prototype.render=function(){return n.createElement(e,i.__assign({},this.props,this.state))},l})(n.PureComponent),l.displayName="WithLocation("+o.getDisplayName(e)+")",l;var l}Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importStar(n),a=i.__importStar(a),s=i.__importDefault(s);var u=function(e){return{location:e}};t.withLocation=l}),define("modules/clean/react/open_in_app/banner",["require","exports","tslib","external/react","modules/clean/react/css","modules/clean/open_in_app/actions","modules/core/i18n"],function(e,t,i,n,r,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importStar(n);var s=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={closed:!1,showInstallAppText:!1},t.handleAppRedirect=function(){t.props.onClick&&t.props.onClick(),o.openInApp(t.props.urls,{onAppNeeded:function(){return t.setState({showInstallAppText:!0})},onAppInstalled:function(){return t.setState({showInstallAppText:!1})}})},t.dismiss=function(){t.setState({closed:!0});var e=t.props.onClose;e&&e()},t}return i.__extends(t,e),t.prototype.componentWillUnmount=function(){o.cleanUp()},t.prototype.render=function(){var e=this.state,t=e.closed,i=e.showInstallAppText;return t?null:n.createElement("div",{className:"open-in-app-banner-container"},n.createElement("button",{className:"button-as-link open-in-app-banner-text",onClick:this.handleAppRedirect},i?a._("Get the Dropbox App"):a._("View In App")),n.createElement("button",{className:"button-as-link open-in-app-banner-close","aria-label":"Close",onClick:this.dismiss}))},t})(n.Component),l=["/static/css/open_in_app/banner-vflSK4--U.css"],u=r.requireCssWithComponent(s,l);t.OpenInAppBanner=u}),define("modules/clean/react/previews/archive/types",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),define("modules/clean/react/previews/constants",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});(function(e){e.LoadError="LOAD_ERROR",e.SupportError="SUPPORT_ERROR",e.ExtensionError="EXTENSION_ERROR",e.NeedFlashError="NEED_FLASH_ERROR",e.FileSizeError="FILE_SIZE_ERROR",e.PasswordProtectedError="PASSWORD_PROTECTED_ERROR",e.PendingUploadError="PENDING_UPLOAD_ERROR",e.EmptyFileError="EMPTY_FILE_ERROR",e.SymLinkError="SYM_LINK_ERROR"})(t.ErrorType||(t.ErrorType={}));(function(e){e.Browse="browse",e.SharedLinkFile="sl_file",e.SharedLinkFolder="sl_folder",e.SharedLinkCollection="sl_collection",e.VersionHistory="version_history",e.FileViewer="file_viewer",e.Desktop="desktop",e.EmbeddedSharedLinkFile="embedded_sl_file",e.ArchiveFile="archive_file"})(t.PreviewSourceContext||(t.PreviewSourceContext={}));(function(e){e.Visit="visit",e.Click="click",e.FileViewerExit="file_viewer_exit"})(t.PreviewSourceAction||(t.PreviewSourceAction={}));(function(e){e.Unknown="unknown",e.NewFile="new_file",e.BeforeUnload="before_unload",e.Unmount="unmount"})(t.PreviewSessionEndReason||(t.PreviewSessionEndReason={}));(function(e){e[e.Unknown=0]="Unknown",e[e.OK=1]="OK",e[e.ConversionFailure=2]="ConversionFailure",e[e.TemporaryFailure=3]="TemporaryFailure",e[e.InternalFailure=4]="InternalFailure",e[e.UnsupportedFormat=5]="UnsupportedFormat",e[e.Timeout=6]="Timeout",e[e.TooBig=7]="TooBig",e[e.InvalidMetadata=8]="InvalidMetadata",e[e.SourceCorrupt=9]="SourceCorrupt",e[e.TimeBudgetExceeded=10]="TimeBudgetExceeded",e[e.NotFound=11]="NotFound",e[e.PasswordProtected=12]="PasswordProtected",e[e.InvalidRequest=13]="InvalidRequest"})(t.RivieraConvertResponseType||(t.RivieraConvertResponseType={}));(function(e){e[e.EnableRegionCreation=0]="EnableRegionCreation",e[e.Fullscreen=1]="Fullscreen",e[e.PageDown=2]="PageDown",e[e.PageIndicator=3]="PageIndicator",e[e.PageUp=4]="PageUp",e[e.Print=5]="Print",e[e.Sidebar=6]="Sidebar",e[e.ZoomIn=7]="ZoomIn",e[e.ZoomOut=8]="ZoomOut",e[e.Esignature=9]="Esignature",e[e.FlipControls=10]="FlipControls"
})(t.PreviewToolbarButtonType||(t.PreviewToolbarButtonType={})),t.HYPERLINK_REGEX_STRING="(?:(?:https?)://)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#]\\S*)?",t.EMAIL_REGEX_STRING="[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,63}"}),define("modules/clean/react/size_class/constants",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});(function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"})(t.SizeClass||(t.SizeClass={})),t.MEDIA_SIZE_CLASS_MEDIUM="screen and (min-width: 736px) and (max-width: 1023px)",t.MEDIA_SIZE_CLASS_LARGE="screen and (min-width: 1024px)"}),define("modules/clean/react/size_class/size_class",["require","exports","tslib","external/react","external/classnames","hoist-non-react-statics","spectrum/match","modules/clean/react/size_class/constants","modules/clean/react/size_class/utils","modules/clean/react/size_class/utils"],function(e,t,i,n,r,o,a,s,l,u){"use strict";function d(e,t){void 0===t&&(t={});var d=(function(o){function d(){var t=null!==o&&o.apply(this,arguments)||this;return t.displayName="WithSizeClass("+u.getDisplayName(e),t.state={},t.getHandleMatch=function(e,i){return function(){t.setState((n={},n[e]=i,n));var n}},t.onMatchMedium=t.getHandleMatch("matchSizeClassMedium",!0),t.onUnmatchMedium=t.getHandleMatch("matchSizeClassMedium",!1),t.onMatchLarge=t.getHandleMatch("matchSizeClassLarge",!0),t.onUnmatchLarge=t.getHandleMatch("matchSizeClassLarge",!1),t}return i.__extends(d,o),d.prototype.render=function(){var o=t.isResponsiveEnabled,u=t.responsiveClassName,d=void 0===u?"":u;return n.createElement("div",{className:r.default((c={},c[d]=!o||o(),c))},n.createElement(a.Match,{media:s.MEDIA_SIZE_CLASS_MEDIUM,onMatch:this.onMatchMedium,onUnmatch:this.onUnmatchMedium}),n.createElement(a.Match,{media:s.MEDIA_SIZE_CLASS_LARGE,onMatch:this.onMatchLarge,onUnmatch:this.onUnmatchLarge}),n.createElement(e,i.__assign({},this.props,{sizeClass:l.getSizeClass(this.state.matchSizeClassMedium,this.state.matchSizeClassLarge,o)})));var c},d})(n.Component);return o.default(d,e)}Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importStar(n),r=i.__importDefault(r),o=i.__importDefault(o),t.withSizeClass=d}),define("modules/clean/react/size_class/utils",["require","exports","modules/clean/react/size_class/constants"],function(e,t,i){"use strict";function n(e,t,n){return n&&!n()?i.SizeClass.Large:t?i.SizeClass.Large:e?i.SizeClass.Medium:i.SizeClass.Small}function r(e){return e.displayName||e.name||"Component"}Object.defineProperty(t,"__esModule",{value:!0}),t.getSizeClass=n,t.getDisplayName=r}),define("modules/clean/redux/reselect-utils",["require","exports","tslib","external/reselect","external/lodash"],function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=i.__importStar(r);var o=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce(function(e,t){return e+"-"+JSON.stringify(t)},"")};t.unboundCreateSelector=n.createSelectorCreator(r.memoize,o)}),define("modules/clean/shared_link/types",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),define("modules/clean/uuid",["require","exports","tslib","modules/clean/crypto","modules/clean/insecure_uuid"],function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importStar(n);var o=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.getRandomBytes=function(e){var t=this;void 0===e&&(e={});var i=new Array(16);try{n.getRandomValues(i)}catch(t){if(t.message.match(/generator isn't seeded/)&&e.allowInsecure)return this.getInsecureRandomValues(i);throw t}return i.map(function(e){return t.toByte(e)})},t.v4=function(e){void 0===e&&(e={});var t=this.getRandomBytes({allowInsecure:e.allowInsecure});return t[6]=15&t[6]|64,t[8]=63&t[8]|128,this.bytesToUUIDString(t)},t})(r.InsecureUUID);t.UUID=o});
//# sourceMappingURL=pkg-shared_link_core.min.js-vflhHGglz.map